# vdh_flickr v0.8.14
# Shows your flickr.com pictures in TextPattern.
# Ralph von der Heyden
# http://www.rvdh.net/vdh_flickr

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjc6InZlcnNpb24iO3M6NjoiMC44LjE0IjtzOjY6ImF1dGhvciI7czoyMDoiUmFs
cGggdm9uIGRlciBIZXlkZW4iO3M6MTA6ImF1dGhvcl91cmkiO3M6MzA6Imh0dHA6Ly93d3cu
cnZkaC5uZXQvdmRoX2ZsaWNrciI7czoxMToiZGVzY3JpcHRpb24iO3M6NDY6IlNob3dzIHlv
dXIgZmxpY2tyLmNvbSBwaWN0dXJlcyBpbiBUZXh0UGF0dGVybi4iO3M6NDoidHlwZSI7aTow
O3M6NDoibmFtZSI7czoxMDoidmRoX2ZsaWNrciI7czo0OiJoZWxwIjtzOjEyOiIJPGgxPjwv
aDE+CgoiO3M6NDoiY29kZSI7czo0NTgxMjoiLyogdmRoX2ZsaWNrciBUZXh0cGF0dGVybiBw
bHVnaW4KKgoqIEF1dGhvcjogUmFscGggdm9uIGRlciBIZXlkZW4gPGZsaWNrckBydmRoLm5l
dD4KKiAgICAgICAgIGh0dHA6Ly93d3cucnZkaC5uZXQvdmRoX2ZsaWNrcgoqCioKKiBMaWNl
bnNlOiBHUEwKKgoqLwoKLyogSGVyZSB5b3UgY2FuIHRyYW5zbGF0ZSBvciBhZGp1c3QgdGhp
bmdzIGFzIHlvdSBsaWtlLgoqCiovCmdsb2JhbCAkdGV4dDsKJHRleHQgPSBhcnJheSgpOwok
dGV4dFsnZXJyb3JfbWVzc2FnZSddID0gJ0ZhaWxlZCB0byBjb25uZWN0IHRvIGZsaWNrci5j
b20hJzsKJHRleHRbJ2xhdGVzdCddID0gJ015IGxhdGVzdCBQaWN0dXJlcy4uLic7CgpnbG9i
YWwgJGNsZWFuX3VybHM7Ci8vJGNsZWFuX3VybHMgPSAxOwoKZ2xvYmFsICRuc2lkOwovLyAk
bnNpZCA9ICcxMjM0NTY3OEBOMDAnOwoKCmNsYXNzIFZkaF9GbGlja3IgewoJdmFyICRhcGlf
a2V5LCAkZW1haWwsICRuc2lkLCAkcGFzc3dvcmQsICR1c2VyZGF0YSwgJHhtbCwgJGZvcm0s
ICR1c2VfYXJ0aWNsZXVybDsKCglmdW5jdGlvbiBWZGhfRmxpY2tyKCRwYXJhbXMpIHsKCQkk
dGhpcy0+YXBpX2tleSA9ICdjMzRlNDBkYzcwN2Y5YmM1MjczNmRiYTU2ODExODkzZic7CgkJ
aWYoaXNzZXQoJHBhcmFtc1snZXJyb3JfbWVzc2FnZSddKSkgewoJCQkkR0xPQkFMU1sndGV4
dCddWydlcnJvcl9tZXNzYWdlJ10gPSAkcGFyYW1zWydlcnJvcl9tZXNzYWdlJ107CgkJfQoJ
CWlmKGlzc2V0KCRwYXJhbXNbJ2NsZWFuX3VybHMnXSkpIHsKCQkJJEdMT0JBTFNbJ2NsZWFu
X3VybHMnXSA9ICRwYXJhbXNbJ2NsZWFuX3VybHMnXTsKCQl9CgkJJG1haW52ZXJzaW9uID0g
c3RydG9rIChQSFBfVkVSU0lPTiwiLiIpOwoJCWlmKCEoJG1haW52ZXJzaW9uID49IDUpKSB7
CgkJCSRHTE9CQUxTWyd1c2VfcGhwNCddID0gMTsKCQl9CgkJaWYgKGlzc2V0KCRwYXJhbXNb
J2VtYWlsJ10pKSAkdGhpcy0+ZW1haWwgPSAkcGFyYW1zWydlbWFpbCddOwoJCShpc3NldCgk
R0xPQkFMU1snbnNpZCddKSk/CgkJJHRoaXMtPm5zaWQgPSAkR0xPQkFMU1snbnNpZCddOgoJ
CSR0aGlzLT5uc2lkID0gJHBhcmFtc1snbnNpZCddOwoJCWlmICgkR0xPQkFMU1snaXNfYXJ0
aWNsZV9saXN0J10gPT09IGZhbHNlKSAkdGhpcy0+dXNlX2FydGljbGV1cmwgPSB0cnVlOwoJ
CWlmIChpc3NldCgkcGFyYW1zWyd1c2VfYXJ0aWNsZXVybCddKSBhbmQgJHBhcmFtc1sndXNl
X2FydGljbGV1cmwnXSA9PSAxKSAkdGhpcy0+dXNlX2FydGljbGV1cmwgPSB0cnVlOwoJCWlm
IChpc3NldCgkcGFyYW1zWyd1c2VfYXJ0aWNsZXVybCddKSBhbmQgJHBhcmFtc1sndXNlX2Fy
dGljbGV1cmwnXSA9PSAwKSAkdGhpcy0+dXNlX2FydGljbGV1cmwgPSBmYWxzZTsKCQlpZiAo
IWlzc2V0KCR0aGlzLT5uc2lkKSkgJHRoaXMtPmdldE5zaWQoKTsKCQkkdGhpcy0+dXNlcmRh
dGEgPSAnJmFwaV9rZXk9JyAuICR0aGlzLT5hcGlfa2V5IC4gJyZ1c2VyX2lkPScgLiAkdGhp
cy0+bnNpZDsKCQlpZiAoaXNzZXQoJHBhcmFtc1sncGFzc3dvcmQnXSkpIHsKCQkJJHRoaXMt
PnBhc3N3b3JkID0gJHBhcmFtc1sncGFzc3dvcmQnXTsKCQkJJHRoaXMtPnVzZXJkYXRhIC49
ICcmcGFzc3dvcmQ9JyAuICR0aGlzLT5wYXNzd29yZDsKCQl9CgkJaWYgKGlzc2V0KCR0aGlz
LT5lbWFpbCkpICR0aGlzLT51c2VyZGF0YSAuPSAnJmVtYWlsPScgLiAkdGhpcy0+ZW1haWw7
Cgl9CgoJZnVuY3Rpb24gZ2V0TnNpZCgpIHsKCQkkbWV0aG9kID0gJ2ZsaWNrci5wZW9wbGUu
ZmluZEJ5RW1haWwmYXBpX2tleT0nIC4gJHRoaXMtPmFwaV9rZXkgLiAnJmZpbmRfZW1haWw9
JyAuICR0aGlzLT5lbWFpbDsKCQkkdGhpcy0+eG1sID0gbmV3IEZsaWNrcigkbWV0aG9kKTsK
CQlpZigkdGhpcy0+eG1sLT5pc1ZhbGlkKCkpIHsKCQkJJHRoaXMtPm5zaWQgPSBhcnJheV9z
aGlmdCgkdGhpcy0+eG1sLT54cGF0aCgnL3JzcC91c2VyL0BpZCcpKTsKCQl9Cgl9CgoJZnVu
Y3Rpb24gbWFrZVJlcXVlc3QoJHBhcmFtZXRlcnMpIHsKCQkka2V5cyA9IGFycmF5X2tleXMo
JHBhcmFtZXRlcnMpOwoJCWlmICgkR0xPQkFMU1sncGVybWxpbmtfbW9kZSddID09ICdtZXNz
eScpIHsKCQkJKCR0aGlzLT51c2VfYXJ0aWNsZXVybCk/CgkJCSRodG1sID0gcGVybWxpbmt1
cmwoJEdMT0JBTFNbJ3RoaXNhcnRpY2xlJ10pOgoJCQkkaHRtbCA9IGh1Lic/cz0nLnVybGVu
Y29kZSgkR0xPQkFMU1sncyddKTsKCQkJZm9yKCRpID0gMDsgJGkgPCBzaXplb2YoJHBhcmFt
ZXRlcnMpOyAkaSsrKSB7CgkJCQkkaHRtbCAuPSAnJmFtcDsnIC4gJGtleXNbJGldIC4gJz0n
IC4gJHBhcmFtZXRlcnNbJGtleXNbJGldXTsKCQkJfQoJCQlyZXR1cm4gJGh0bWw7CgkJfQoJ
CWVsc2UgaWYgKCRHTE9CQUxTWydjbGVhbl91cmxzJ10pIHsKCQkJKCR0aGlzLT51c2VfYXJ0
aWNsZXVybCk/CgkJCSRodG1sID0gcGVybWxpbmt1cmwoJEdMT0JBTFNbJ3RoaXNhcnRpY2xl
J10pOgoJCQkkaHRtbCA9IGh1LnVybGVuY29kZSgkR0xPQkFMU1sncyddKTsKCQkJZm9yKCRp
ID0gMDsgJGkgPCBzaXplb2YoJHBhcmFtZXRlcnMpOyAkaSsrKSB7CgkJCQkkaHRtbCAuPSAn
LycgLiAka2V5c1skaV0gLiAnLycgLiAkcGFyYW1ldGVyc1ska2V5c1skaV1dOwoJCQl9CgkJ
CXJldHVybiAkaHRtbDsKCQl9CgkJZWxzZSB7CgkJCSgkdGhpcy0+dXNlX2FydGljbGV1cmwp
PwoJCQkkaHRtbCA9IHBlcm1saW5rdXJsKCRHTE9CQUxTWyd0aGlzYXJ0aWNsZSddKSAuICcv
PycgLiAka2V5c1swXSAuICc9JyAuJHBhcmFtZXRlcnNbJGtleXNbMF1dOgoJCQkkaHRtbCA9
IGh1LnVybGVuY29kZSgkR0xPQkFMU1sncyddKSAuICcvPycgLiAka2V5c1swXSAuICc9JyAu
JHBhcmFtZXRlcnNbJGtleXNbMF1dOwoJCQlmb3IoJGkgPSAxOyAkaSA8IHNpemVvZigkcGFy
YW1ldGVycyk7ICRpKyspIHsKCQkJCSRodG1sIC49ICcmYW1wOycgLiAka2V5c1skaV0gLiAn
PScgLiAkcGFyYW1ldGVyc1ska2V5c1skaV1dOwoJCQl9CgkJfQoJCXJldHVybiAkaHRtbDsK
CX0KCglmdW5jdGlvbiBnZXRQaG90b1VybCgkcGhvdG8sICRzaXplKSB7CgkJJGZhcm0gPSAk
cGhvdG9bJ2Zhcm0nXTsKCQkkc2VydmVyID0gJHBob3RvWydzZXJ2ZXInXTsKCQkkaWQgPSAo
aXNzZXQoJHBob3RvWydwcmltYXJ5J10pKT8gJHBob3RvWydwcmltYXJ5J10gOiAkcGhvdG9b
J2lkJ107CgkJJHNlY3JldCA9ICRwaG90b1snc2VjcmV0J107CgkJJGZvcm1hdCA9ICJqcGci
OwoJCSRpbWdzaXplID0gKCJuIiAhPSAkc2l6ZSk/ICJfIiAuICRzaXplIDogIiI7CgkJaWYg
KCJvIiA9PSAkc2l6ZSkKCQl7CgkJCSRzZWNyZXQgPSAkcGhvdG9bJ29yaWdpbmFsX3NlY3Jl
dCddOwoJCQkkZm9ybWF0ID0gJHBob3RvWydvcmlnaW5hbF9mb3JtYXQnXTsKCQl9CgkJJGlt
Z191cmwgPSAiaHR0cDovL2Zhcm0ke2Zhcm19LnN0YXRpYy5mbGlja3IuY29tLyR7c2VydmVy
fS8ke2lkfV8ke3NlY3JldH0ke2ltZ3NpemV9LiR7Zm9ybWF0fSI7CgkJcmV0dXJuICRpbWdf
dXJsOwoJfQoKCWZ1bmN0aW9uIF9fdG9TdHJpbmcoKSB7CgkJcmV0dXJuICR0aGlzLT5uc2lk
OwoJfQp9CgoKY2xhc3MgR2FsbGVyeSBleHRlbmRzIFZkaF9GbGlja3IgewoJdmFyICR4bWws
ICRpLCAkc2V0LCAkc2V0X3ByZXZpZXdfc2l6ZSwgJG1vZGU7Cgl2YXIgJHNldHNfcGVyX3Bh
Z2UsICRwYWdlLCAkcHJldmlvdXNfcGFnZSwgJG5leHRfcGFnZSwgJGxhc3RwYWdlLCAkbnVt
YmVyX29mX3NldHM7Cgl2YXIgJGV4Y2VwdGlvbnMgPSBhcnJheSgpOwoJdmFyICRzZXRzID0g
YXJyYXkoKTsKCglmdW5jdGlvbiBHYWxsZXJ5KCRwYXJhbXMpIHsKCQkkdGhpcy0+VmRoX0Zs
aWNrcigkcGFyYW1zKTsKCQlpZiAoaXNzZXQoJHBhcmFtc1snZXhjZXB0J10pKSAkdGhpcy0+
ZXhjZXB0aW9ucyA9IGV4cGxvZGUoIiwiLCAkcGFyYW1zWydleGNlcHQnXSk7CgkJKGlzc2V0
KCRwYXJhbXNbJ3NldF9wcmV2aWV3X3NpemUnXSkpPwoJCSR0aGlzLT5zZXRfcHJldmlld19z
aXplID0gQCRwYXJhbXNbJ3NldF9wcmV2aWV3X3NpemUnXToKCQkkdGhpcy0+c2V0X3ByZXZp
ZXdfc2l6ZSA9ICdtJzsKCQkoaXNzZXQoJF9HRVRbJ3BhZ2UnXSkpPwoJCSR0aGlzLT5wYWdl
ID0gJF9HRVRbJ3BhZ2UnXToKCQkkdGhpcy0+cGFnZSA9IDE7CgkJKCFlbXB0eSgkcGFyYW1z
Wydtb2RlJ10pKT8KCQkkdGhpcy0+bW9kZSA9ICRwYXJhbXNbJ21vZGUnXToKCQkkdGhpcy0+
bW9kZSA9ICdhbGwnOwoJCSR0aGlzLT5nZXRTZXRzKCRwYXJhbXMpOwoJCWlmIChpc3NldCgk
cGFyYW1zWydzZXRzX3Blcl9wYWdlJ10pKSB7CgkJCSR0aGlzLT5zZXRzX3Blcl9wYWdlID0g
JHBhcmFtc1sndGh1bWJzX3Blcl9wYWdlJ107CgkJCSR0aGlzLT5sYXN0cGFnZSA9IGNlaWwo
JHRoaXMtPm51bWJlcl9vZl9zZXRzIC8gJHRoaXMtPnNldHNfcGVyX3BhZ2UpOwoJCQlpZiAo
JHRoaXMtPnBhZ2UtMSA+PSAxKSB7CgkJCQkkdGhpcy0+cHJldmlvdXNfcGFnZSA9ICR0aGlz
LT5wYWdlIC0gMTsKCQkJfQoJCQllbHNlIHsKCQkJCSR0aGlzLT5wcmV2aW91c19wYWdlID0g
JHRoaXMtPmxhc3RwYWdlOwoJCQl9CgkJCWlmICgkdGhpcy0+cGFnZSsxIDw9ICR0aGlzLT5s
YXN0cGFnZSkgewoJCQkJJHRoaXMtPm5leHRfcGFnZSA9ICR0aGlzLT5wYWdlICsgMTsKCQkJ
fQoJCQllbHNlIHsKCQkJCSR0aGlzLT5uZXh0X3BhZ2UgPSAgMTsKCQkJfQoJCX0KCQlpZiAo
aXNzZXQoJHBhcmFtc1snc2V0X2Zvcm0nXSkpIHsKCQkJJHRoaXMtPmZvcm0gPSBmZXRjaCgn
Rm9ybScsJ3R4cF9mb3JtJywibmFtZSIsJHBhcmFtc1snc2V0X2Zvcm0nXSk7CgkJfQoJCWVs
c2UgewoJCQkkdGhpcy0+Zm9ybSA9ICcKCQkJPGRpdiBjbGFzcz0ic2V0cHJldmlldyI+CgkJ
CTxkaXYgY2xhc3M9InRodW1ibmFpbCI+CgkJCTx0eHA6dmRoX2ZsaWNrcl9zZXRfbGluayB0
aXRsZT0iUHJvY2VlZCB0byB0aGlzIGdhbGxlcnkiPjx0eHA6dmRoX2ZsaWNrcl9zZXRfaW1n
IHRpdGxlPSJQcm9jZWVkIHRvIHRoaXMgZ2FsbGVyeSIgLz48L3R4cDp2ZGhfZmxpY2tyX3Nl
dF9saW5rPgoJCQk8L2Rpdj4KCQkJPGRpdj4KCQkJPGgzIGNsYXNzPSJ0aXRsZSI+PHR4cDp2
ZGhfZmxpY2tyX3NldF9saW5rIHRpdGxlPSJQcm9jZWVkIHRvIHRoaXMgZ2FsbGVyeSI+PHR4
cDp2ZGhfZmxpY2tyX3NldF90aXRsZSAvPjwvdHhwOnZkaF9mbGlja3Jfc2V0X2xpbms+PC9o
Mz4KCQkJPGg0IGNsYXNzPSJudW1iZXJfb2ZfcGhvdG9zIj48dHhwOnZkaF9mbGlja3Jfc2V0
X251bWJlcl9vZl9waG90b3MgLz4gUGhvdG9zPC9oND4KCQkJPHAgY2xhc3M9InNldF9kZXNj
cmlwdGlvbiI+PHR4cDp2ZGhfZmxpY2tyX3NldF9kZXNjcmlwdGlvbiAvPjwvcD4KCQkJPC9k
aXY+CgkJCTxkaXYgc3R5bGU9ImNsZWFyOmJvdGg7Ij48L2Rpdj4KCQkJPC9kaXY+JzsKCQl9
Cgl9CgoJZnVuY3Rpb24gZ2V0U2V0cygkcGFyYW1zKSB7CgkJJG1ldGhvZCA9ICdmbGlja3Iu
cGhvdG9zZXRzLmdldExpc3QnIC4gJHRoaXMtPnVzZXJkYXRhOwoJCSR0aGlzLT54bWwgPSBu
ZXcgRmxpY2tyKCRtZXRob2QpOwoJCWlmKCR0aGlzLT54bWwtPmlzVmFsaWQoKSkgewoJCQkk
aT0xOwoJCQlmb3JlYWNoKCR0aGlzLT54bWwtPnhwYXRoKCcvcnNwL3Bob3Rvc2V0cy9waG90
b3NldCcpIGFzICRwaG90b3NldCkgewoJCQkJJHNldF9pZCA9IGFycmF5X3NoaWZ0KCR0aGlz
LT54bWwtPnhwYXRoKCIvcnNwL3Bob3Rvc2V0cy9waG90b3NldFskaV0vQGlkIikpOwoJCQkJ
aWYoJHRoaXMtPm1vZGU9PSdhbGwnKSB7CgkJCQkJaWYoIWluX2FycmF5KCRzZXRfaWQsICR0
aGlzLT5leGNlcHRpb25zKSkgewoJCQkJCQkkdGhpcy0+YWRkX3RvX3NldHMoJHNldF9pZCwg
JGkpOwoJCQkJCX0KCQkJCX0KCQkJCWlmKCR0aGlzLT5tb2RlPT0nbm9uZScpIHsKCQkJCQlp
Zihpbl9hcnJheSgkc2V0X2lkLCAkdGhpcy0+ZXhjZXB0aW9ucykpIHsKCQkJCQkJJHRoaXMt
PmFkZF90b19zZXRzKCRzZXRfaWQsICRpKTsKCQkJCQl9CgkJCQl9CgkJCQkkaSsrOwoJCQl9
CgkJfQoJfQoKCWZ1bmN0aW9uIGFkZF90b19zZXRzKCRzZXRfaWQsICRpKSB7CgkJJHNldCA9
IGFycmF5KCdpZCcgPT4gJHNldF9pZCk7CgkJJHNldFsndGl0bGUnXSA9IGFycmF5X3NoaWZ0
KCR0aGlzLT54bWwtPnhwYXRoKCIvcnNwL3Bob3Rvc2V0cy9waG90b3NldFskaV0vdGl0bGUv
dGV4dCgpIikpOwoJCSRzZXRbJ2Rlc2NyaXB0aW9uJ10gPSBhcnJheV9zaGlmdCgkdGhpcy0+
eG1sLT54cGF0aCgiL3JzcC9waG90b3NldHMvcGhvdG9zZXRbJGldL2Rlc2NyaXB0aW9uL3Rl
eHQoKSIpKTsKCQkkc2V0WydwcmltYXJ5J10gPSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54
cGF0aCgiL3JzcC9waG90b3NldHMvcGhvdG9zZXRbJGldL0BwcmltYXJ5IikpOwoJCSRzZXRb
J2Zhcm0nXSA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCIvcnNwL3Bob3Rvc2V0
cy9waG90b3NldFskaV0vQGZhcm0iKSk7CgkJJHNldFsnc2VjcmV0J10gPSBhcnJheV9zaGlm
dCgkdGhpcy0+eG1sLT54cGF0aCgiL3JzcC9waG90b3NldHMvcGhvdG9zZXRbJGldL0BzZWNy
ZXQiKSk7CgkJJHNldFsnc2VydmVyJ10gPSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0
aCgiL3JzcC9waG90b3NldHMvcGhvdG9zZXRbJGldL0BzZXJ2ZXIiKSk7CgkJJHNldFsncGhv
dG9zJ10gPSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0aCgiL3JzcC9waG90b3NldHMv
cGhvdG9zZXRbJGldL0BwaG90b3MiKSk7CgkJYXJyYXlfcHVzaCgkdGhpcy0+c2V0cywgJHNl
dCk7Cgl9CgoJZnVuY3Rpb24gc2V0X2ltZygkcGFyYW1zKSB7CgkJJGltZ191cmwgPSAkdGhp
cy0+Z2V0UGhvdG9VcmwoJHRoaXMtPnNldCwgJHRoaXMtPnNldF9wcmV2aWV3X3NpemUpOwoJ
CSRpbWdfdXJsID0gJzxpbWcgc3JjPSInIC4gJGltZ191cmwgLiAnIiBhbHQ9IicgLiAkdGhp
cy0+dGl0bGVzWyR0aGlzLT5pXTsKCQkoaXNzZXQoJHBhcmFtc1sndGl0bGUnXSkpPyAkaW1n
X3VybCAuPSAnIiB0aXRsZT0iJyAuICRwYXJhbXNbJ3RpdGxlJ10gLiAnIiAvPicgOiAkaW1n
X3VybCAuPSAnIiAvPic7CgkJcmV0dXJuICRpbWdfdXJsOwoJfQoKCWZ1bmN0aW9uIHNldF9s
aW5rKCRwYXJhbXMsICR0aGluZykgewoJCSR3aGF0ID0gJyBocmVmPSInLiAkdGhpcy0+bWFr
ZVJlcXVlc3QoYXJyYXkoJ3NldCcgPT4gJHRoaXMtPnNldFsnaWQnXSkpIC4nIic7CgkJaWYg
KGlzc2V0KCRwYXJhbXNbJ3RpdGxlJ10pKSAkd2hhdCAuPSAnIHRpdGxlPSInIC4gJHBhcmFt
c1sndGl0bGUnXSAuICciJzsKCQkkaHRtbCA9IHRhZygkdGhpbmcsJ2EnLCR3aGF0KTsKCQly
ZXR1cm4gJGh0bWw7Cgl9CgoJZnVuY3Rpb24gc2V0X3RpdGxlKCkgewoJCSRodG1sID0gJHRo
aXMtPnNldFsndGl0bGUnXTsKCQlyZXR1cm4gJGh0bWw7Cgl9CgoJZnVuY3Rpb24gc2V0X251
bWJlcl9vZl9waG90b3MoKSB7CgkJJGh0bWwgPSAkdGhpcy0+c2V0WydwaG90b3MnXTsKCQly
ZXR1cm4gJGh0bWw7Cgl9CgoJZnVuY3Rpb24gc2V0X2Rlc2NyaXB0aW9uKCkgewoJCSRodG1s
ID0gJHRoaXMtPnNldFsnZGVzY3JpcHRpb24nXTsKCQlyZXR1cm4gJGh0bWw7Cgl9CgoJZnVu
Y3Rpb24gc2V0X2xpc3QoJHBhcmFtcykgewoJCWlmKCEkdGhpcy0+eG1sLT5pc1ZhbGlkKCkp
IHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkoaXNzZXQoJHBhcmFtc1snd3JhcHRhZyddKSA9
PSB0cnVlKT8gJHdyYXB0YWcgPSAkcGFyYW1zWyd3cmFwdGFnJ10gOiAkd3JhcHRhZyA9ICcn
OwoJCShpc3NldCgkcGFyYW1zWydicmVhayddKSA9PSB0cnVlKT8gJGJyZWFrID0gJHBhcmFt
c1snYnJlYWsnXSA6ICRicmVhayA9ICdicic7CgkJJHRoaXMtPmkgPSAwOwoJCWZvcmVhY2gg
KCR0aGlzLT5zZXRzIGFzICR0aGlzLT5zZXQpIHsKCQkJKCRfR0VUWydzZXQnXSA9PSAoZmxv
YXQpICR0aGlzLT5zZXRbJ2lkJ10pPyAkcGFyYW0gPSAnIGNsYXNzPSJjdXJyZW50IicgOiAn
JzsKCQkJKCRicmVhayAhPSAnYnInKT8KCQkJJGh0bWwgLj0gdGFnKCR0aGlzLT5zZXRfbGlu
aygnJywgJHRoaXMtPnNldF90aXRsZSgpKSwgJGJyZWFrLCAkcGFyYW0pIC4gIlxuIjoKCQkJ
JGh0bWwgLj0gJHRoaXMtPnNldF9saW5rKCcnLCAkdGhpcy0+c2V0X3RpdGxlKCkpIC4nPGJy
IC8+JyAuICJcbiI7CgkJCSR0aGlzLT5pKys7CgkJCXVuc2V0KCRwYXJhbSk7CgkJfQoJCXJl
dHVybiAoKCR3cmFwdGFnICE9ICcnKSA9PSB0cnVlKT8gdGFnKCRodG1sLCAkd3JhcHRhZykg
OiAkaHRtbDsKCX0KCglmdW5jdGlvbiBfX3RvU3RyaW5nKCkgewoJCWlmKCEkdGhpcy0+eG1s
LT5pc1ZhbGlkKCkpIHsKCQkJcmV0dXJuICRHTE9CQUxTWyd0ZXh0J11bJ2Vycm9yX21lc3Nh
Z2UnXTsKCQl9CgkJJHRoaXMtPmkgPSAwOwoJCSRyZXN1bHQgPSAnJzsKCQlmb3JlYWNoICgk
dGhpcy0+c2V0cyBhcyAkdGhpcy0+c2V0KSB7CgkJCSRyZXN1bHQgLj0gcGFyc2UoJHRoaXMt
PmZvcm0pOwoJCQkkdGhpcy0+aSsrOwoJCX0KCQlyZXR1cm4gJHJlc3VsdDsKCX0KfQoKCmNs
YXNzIFRodW1ibmFpbHMgZXh0ZW5kcyBWZGhfRmxpY2tyIHsKCXZhciAkeG1sLCAkaWQsICRv
d25lciwgJHByaW1hcnksICRzZWNyZXQsICRudW1iZXJfb2ZfcGhvdG9zLCAkdGl0bGUsICRk
ZXNjcmlwdGlvbiwgJHNldCwgJHBob3RvLCAkbGF0ZXN0OwoJdmFyICR0aHVtYm5haWxfc2l6
ZSwgJGltZ19zaXplLCAkb3BlbiwgJHRhZ19hbmQsICRsaW5rLCAkdXNlX2FydF9pZF9hc190
YWc7Cgl2YXIgJHBhZ2UsICR0aHVtYnNfcGVyX3BhZ2UsICRzdGFydCwgJGVuZCwgJGxhc3Rw
YWdlLCAkcHJldmlvdXNfcGFnZSwgJG5leHRfcGFnZTsKCXZhciAkcGhvdG9zID0gYXJyYXko
KSwgJHRhZ3MgPSBhcnJheSgpOwoKCWZ1bmN0aW9uIFRodW1ibmFpbHMoJHBhcmFtcykgewoJ
CSR0aGlzLT5WZGhfRmxpY2tyKCRwYXJhbXMpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1z
OwoJCShpc3NldCgkcGFyYW1zWyd0aHVtYm5haWxfc2l6ZSddKSk/CgkJJHRoaXMtPnRodW1i
bmFpbF9zaXplID0gJHBhcmFtc1sndGh1bWJuYWlsX3NpemUnXToKCQkkdGhpcy0+dGh1bWJu
YWlsX3NpemUgPSAncyc7CgkJKGlzc2V0KCRwYXJhbXNbJ2ltZ19zaXplJ10pKT8KCQkkdGhp
cy0+aW1nX3NpemUgPSAkcGFyYW1zWydpbWdfc2l6ZSddOgoJCSR0aGlzLT5pbWdfc2l6ZSA9
ICduJzsKCQkoaXNzZXQoJHBhcmFtc1snb3BlbiddKSk/CgkJJHRoaXMtPm9wZW4gPSAkcGFy
YW1zWydvcGVuJ106CgkJJHRoaXMtPm9wZW4gPSAnc2VsZic7CgkJKGlzc2V0KCRwYXJhbXNb
J3NldCddKSk/CgkJJHRoaXMtPnNldCA9ICRwYXJhbXNbJ3NldCddOgoJCSR0aGlzLT5zZXQg
PSAkX0dFVFsnc2V0J107CgkJKGlzc2V0KCRfR0VUWyd0YWdzJ10pKT8KCQlAJHRoaXMtPnRh
Z3MgPSAkX0dFVFsndGFncyddOgoJCUAkdGhpcy0+dGFncyA9ICRwYXJhbXNbJ3RhZ3MnXTsK
CQlpZighZW1wdHkoJHRoaXMtPnRhZ3MpKSB1bnNldCgkdGhpcy0+c2V0KTsKCQkoaXNzZXQo
JF9HRVRbJ3BhZ2UnXSkpPwoJCSR0aGlzLT5wYWdlID0gJF9HRVRbJ3BhZ2UnXToKCQkkdGhp
cy0+cGFnZSA9IDE7CgkJaWYgKGlzc2V0KCRwYXJhbXNbJ2xhdGVzdCddKSkgJHRoaXMtPmxh
dGVzdCA9ICRwYXJhbXNbJ2xhdGVzdCddOwoJCShpc3NldCgkcGFyYW1zWydsaW5rdGh1bWJz
J10pKT8KCQkkdGhpcy0+bGlua3RodW1icyA9ICRwYXJhbXNbJ2xpbmt0aHVtYnMnXToKCQkk
dGhpcy0+bGlua3RodW1icyA9IDE7CgkJKGlzc2V0KCRwYXJhbXNbJ3VzZV9hcnRfaWRfYXNf
dGFnJ10pKT8KCQkkdGhpcy0+dXNlX2FydF9pZF9hc190YWcgPSAkcGFyYW1zWyd1c2VfYXJ0
X2lkX2FzX3RhZyddOgoJCSR0aGlzLT51c2VfYXJ0X2lkX2FzX3RhZyA9IDA7CgkJaWYgKGlz
c2V0KCRwYXJhbXNbJ3RhZ19hbmQnXSkpICR0aGlzLT50YWdfYW5kID0gMTsKCQlpZiAoaXNz
ZXQoJHBhcmFtc1sndGh1bWJuYWlsc19mb3JtJ10pKSAkdGhpcy0+Zm9ybSA9IGZldGNoKCdG
b3JtJywndHhwX2Zvcm0nLCJuYW1lIiwkcGFyYW1zWyd0aHVtYm5haWxzX2Zvcm0nXSk7CgkJ
ZWxzZSB7CgkJCSR0aGlzLT5mb3JtID0gJwoJCQk8aDM+PHR4cDp2ZGhfZmxpY2tyX3RodW1i
bmFpbHNfdGl0bGUgLz4sIDx0eHA6dmRoX2ZsaWNrcl90aHVtYm5haWxzX251bWJlcl9vZl9w
aG90b3MgLz4gUGhvdG9zPC9oMz4KCQkJPHAgY2xhc3M9ImZsaWNrcl9zbGlkZXNob3ciPgoJ
CQk8dHhwOnZkaF9mbGlja3JfdGh1bWJuYWlsc19zbGlkZXNob3c+JnJhcXVvOyBTaG93IGFz
IHNsaWRlc2hvdyBpbiBuZXcgd2luZG93LjwvdHhwOnZkaF9mbGlja3JfdGh1bWJuYWlsc19z
bGlkZXNob3c+CgkJCTwvcD4KCQkJPHR4cDp2ZGhfZmxpY2tyX3RodW1ibmFpbHNfaWZfZGVz
Y3JpcHRpb24+CgkJCTxwIGNsYXNzPSJmbGlja3JfdGh1bWJuYWlsc19kZXNjcmlwdGlvbiI+
CgkJCTx0eHA6dmRoX2ZsaWNrcl90aHVtYm5haWxzX2Rlc2NyaXB0aW9uIC8+CgkJCTwvcD4K
CQkJPC90eHA6dmRoX2ZsaWNrcl90aHVtYm5haWxzX2lmX2Rlc2NyaXB0aW9uPgoJCQk8ZGl2
IGNsYXNzPSJmbGlja3JzZXQiPgoJCQk8dHhwOnZkaF9mbGlja3JfdGh1bWJuYWlsc19saXN0
IC8+CgkJCTwvZGl2PgoJCQk8dHhwOnZkaF9mbGlja3JfdGh1bWJuYWlsc19pZl9tdWx0aXBs
ZV9wYWdlcz4KCQkJPGgzIGNsYXNzPSJwYWdlc19uYXYiPnBhZ2VzIG5hdmlnYXRpb248L2gz
PgoJCQk8cD4KCQkJdGh1bWJzIHBlciBwYWdlOiA8dHhwOnZkaF9mbGlja3JfdGh1bWJuYWls
c19wZXJfcGFnZSAvPjxiciAvPgoJCQlTaG93aW5nIHBhZ2UgPHR4cDp2ZGhfZmxpY2tyX3Ro
dW1ibmFpbHNfY3VycmVudF9wYWdlIC8+IG9mIDx0eHA6dmRoX2ZsaWNrcl90aHVtYm5haWxz
X3RvdGFsX3BhZ2VzIC8+LjxiciAvPgoJCQlTaG93aW5nIHRodW1iIDx0eHA6dmRoX2ZsaWNr
cl90aHVtYm5haWxzX3BhZ2VzX3N0YXJ0dGh1bWIgLz4gdG8gPHR4cDp2ZGhfZmxpY2tyX3Ro
dW1ibmFpbHNfcGFnZXNfZW5kdGh1bWIgLz4uPGJyIC8+CgkJCTx0eHA6dmRoX2ZsaWNrcl90
aHVtYm5haWxzX3BhZ2VzX2ZpcnN0PiZsYXF1bzsgZmlyc3Q8L3R4cDp2ZGhfZmxpY2tyX3Ro
dW1ibmFpbHNfcGFnZXNfZmlyc3Q+IHwKCQkJPHR4cDp2ZGhfZmxpY2tyX3RodW1ibmFpbHNf
cGFnZXNfcHJldmlvdXM+Jmx0OyBwcmV2aW91czwvdHhwOnZkaF9mbGlja3JfdGh1bWJuYWls
c19wYWdlc19wcmV2aW91cz4gfAoJCQk8dHhwOnZkaF9mbGlja3JfdGh1bWJuYWlsc19wYWdl
c19uZXh0Pm5leHQgJmd0OzwvdHhwOnZkaF9mbGlja3JfdGh1bWJuYWlsc19wYWdlc19uZXh0
PiB8CgkJCTx0eHA6dmRoX2ZsaWNrcl90aHVtYm5haWxzX3BhZ2VzX2xhc3Q+bGFzdCAmcmFx
dW87PC90eHA6dmRoX2ZsaWNrcl90aHVtYm5haWxzX3BhZ2VzX2xhc3Q+CgkJCTwvcD4KCQkJ
R28gdG8gcGFnZSBudW1iZXI6CgkJCTx0eHA6dmRoX2ZsaWNrcl90aHVtYm5haWxzX3BhZ2Vz
X2xpc3Qgd3JhcHRhZz0idWwiIGJyZWFrPSJsaSIgY2xhc3MgPSJ0aHVtYnNfcGFnZXMiIC8+
CgkJCTwvdHhwOnZkaF9mbGlja3JfdGh1bWJuYWlsc19pZl9tdWx0aXBsZV9wYWdlcz4KCQkJ
PGRpdiBzdHlsZT0iY2xlYXI6Ym90aDsiPjwvZGl2Pic7CgkJfQoJCSR0aGlzLT5nZXRQaG90
b3MoKTsKCQkkdGhpcy0+dGh1bWJzX3Blcl9wYWdlID0gMDsKCQlpZiAoaXNzZXQoJHBhcmFt
c1sndGh1bWJzX3Blcl9wYWdlJ10pKSB7CgkJCSR0aGlzLT50aHVtYnNfcGVyX3BhZ2UgPSAk
cGFyYW1zWyd0aHVtYnNfcGVyX3BhZ2UnXTsKCQkJJHRoaXMtPmxhc3RwYWdlID0gY2VpbCgk
dGhpcy0+bnVtYmVyX29mX3Bob3RvcyAvICR0aGlzLT50aHVtYnNfcGVyX3BhZ2UpOwoJCQlp
ZiAoJHRoaXMtPnBhZ2UtMSA+PSAxKSB7CgkJCQkkdGhpcy0+cHJldmlvdXNfcGFnZSA9ICR0
aGlzLT5wYWdlIC0gMTsKCQkJfQoJCQllbHNlIHsKCQkJCSR0aGlzLT5wcmV2aW91c19wYWdl
ID0gJHRoaXMtPmxhc3RwYWdlOwoJCQl9CgkJCWlmICgkdGhpcy0+cGFnZSsxIDw9ICR0aGlz
LT5sYXN0cGFnZSkgewoJCQkJJHRoaXMtPm5leHRfcGFnZSA9ICR0aGlzLT5wYWdlICsgMTsK
CQkJfQoJCQllbHNlIHsKCQkJCSR0aGlzLT5uZXh0X3BhZ2UgPSAgMTsKCQkJfQoJCX0KCX0K
CglmdW5jdGlvbiBnZXRQaG90b3MoKSB7CgkJaWYgKCR0aGlzLT51c2VfYXJ0X2lkX2FzX3Rh
ZyA9PSAxKSB7CgkJCWdsb2JhbCAkdGhpc2FydGljbGU7CgkJCWlmKGlzc2V0KCR0aGlzLT50
YWdzKSBhbmQgKCR0aGlzLT50YWdzICE9ICcnKSkgewoJCQkJJHRoaXMtPnRhZ3MgLj0gJywn
OwoJCQl9CgkJCSR0aGlzLT50YWdzIC49ICdhcnRpY2xlJy4kdGhpc2FydGljbGVbJ3RoaXNp
ZCddOwoJCX0KCQlpZiAoaXNzZXQoJHRoaXMtPnRhZ3MpKSB7CgkJCSR0aGlzLT50aXRsZSA9
ICR0aGlzLT50YWdzOwoJCQkkbWV0aG9kID0gJ2ZsaWNrci5waG90b3Muc2VhcmNoJyAuICR0
aGlzLT51c2VyZGF0YSAuICcmdGFncz0nIC4gJHRoaXMtPnRhZ3MgLiAnJnBlcl9wYWdlPTUw
MCZleHRyYXM9b3JpZ2luYWxfZm9ybWF0JzsKCQkJaWYgKGlzc2V0KCR0aGlzLT50YWdfYW5k
KSkgewoJCQkJJG1ldGhvZCAuPSAnJnRhZ19tb2RlPWFsbCc7CgkJCX0KCQkJJHRoaXMtPnht
bCA9IG5ldyBGbGlja3IoJG1ldGhvZCk7CgkJCWlmKCR0aGlzLT54bWwtPmlzVmFsaWQoKSkg
ewoJCQkJZm9yZWFjaCgkdGhpcy0+eG1sLT54cGF0aCgnL3JzcC9waG90b3MvcGhvdG8vQGlk
JykgYXMgJHBob3RvX2lkKSB7CgkJCQkJJHBob3RvID0gYXJyYXkoJ2lkJyA9PiAkcGhvdG9f
aWQpOwoJCQkJCSRwaG90b1sndGl0bGUnXSA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhw
YXRoKCIvcnNwL3Bob3Rvcy9waG90b1tAaWQ9Ii4kcGhvdG9faWQuIl0vQHRpdGxlIikpOwoJ
CQkJCSRwaG90b1snc2VjcmV0J10gPSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0aCgi
L3JzcC9waG90b3MvcGhvdG9bQGlkPSIuJHBob3RvX2lkLiJdL0BzZWNyZXQiKSk7CgkJCQkJ
JHBob3RvWydvcmlnaW5hbF9zZWNyZXQnXSA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhw
YXRoKCIvcnNwL3Bob3Rvcy9waG90b1tAaWQ9Ii4kcGhvdG9faWQuIl0vQG9yaWdpbmFsc2Vj
cmV0IikpOwoJCQkJCSRwaG90b1snb3JpZ2luYWxfZm9ybWF0J10gPSBhcnJheV9zaGlmdCgk
dGhpcy0+eG1sLT54cGF0aCgiL3JzcC9waG90b3MvcGhvdG9bQGlkPSIuJHBob3RvX2lkLiJd
L0BvcmlnaW5hbGZvcm1hdCIpKTsKCQkJCQkkcGhvdG9bJ3NlcnZlciddID0gYXJyYXlfc2hp
ZnQoJHRoaXMtPnhtbC0+eHBhdGgoIi9yc3AvcGhvdG9zL3Bob3RvW0BpZD0iLiRwaG90b19p
ZC4iXS9Ac2VydmVyIikpOwoJCQkJCSRwaG90b1snZmFybSddID0gYXJyYXlfc2hpZnQoJHRo
aXMtPnhtbC0+eHBhdGgoIi9yc3AvcGhvdG9zL3Bob3RvW0BpZD0iLiRwaG90b19pZC4iXS9A
ZmFybSIpKTsKCQkJCQlhcnJheV9wdXNoKCR0aGlzLT5waG90b3MsICRwaG90byk7CgkJCQl9
CgkJCQkkdGhpcy0+bnVtYmVyX29mX3Bob3RvcyA9IChzdHJpbmcpIGFycmF5X3NoaWZ0KCR0
aGlzLT54bWwtPnhwYXRoKCcvcnNwL3Bob3Rvcy9AdG90YWwnKSk7CgkJCQlpZiAoaXNzZXQo
JHRoaXMtPnBhcmFtc1sncmFuZG9tJ10pKSAkdGhpcy0+cmFuZG9taXplKCR0aGlzLT5wYXJh
bXNbJ3JhbmRvbSddKTsKCQkJfQoJCX0KCQlpZiAoaXNzZXQoJHRoaXMtPmxhdGVzdCkpIHsK
CQkJJHRoaXMtPnRpdGxlID0gJEdMT0JBTFNbJ3RleHQnXVsnbGF0ZXN0J107CgkJCSRtZXRo
b2QgPSAnZmxpY2tyLnBob3Rvcy5zZWFyY2gnIC4gJHRoaXMtPnVzZXJkYXRhOwoJCQlpZiAo
JHRoaXMtPnRodW1ic19wZXJfcGFnZSA9PSAwIG9yICR0aGlzLT5sYXRlc3QgPD0gJHRoaXMt
PnRodW1ic19wZXJfcGFnZSkgJG1ldGhvZCAuPSAnJnBlcl9wYWdlPScgLiAkdGhpcy0+bGF0
ZXN0OwoJCQllbHNlIHsKCQkJCSRtZXRob2QgLj0gJyZwZXJfcGFnZT0nIC4gJHRoaXMtPnRo
dW1ic19wZXJfcGFnZTsKCQkJfQoJCQkkbWV0aG9kIC49ICImZXh0cmFzPW9yaWdpbmFsX2Zv
cm1hdCI7CgkJCSR0aGlzLT54bWwgPSBuZXcgRmxpY2tyKCRtZXRob2QpOwoJCQlpZigkdGhp
cy0+eG1sLT5pc1ZhbGlkKCkpIHsKCQkJCWZvcmVhY2goJHRoaXMtPnhtbC0+eHBhdGgoJy9y
c3AvcGhvdG9zL3Bob3RvL0BpZCcpIGFzICRwaG90b19pZCkgewoJCQkJCSRwaG90byA9IGFy
cmF5KCdpZCcgPT4gJHBob3RvX2lkKTsKCQkJCQkkcGhvdG9bJ3RpdGxlJ10gPSBhcnJheV9z
aGlmdCgkdGhpcy0+eG1sLT54cGF0aCgiL3JzcC9waG90b3MvcGhvdG9bQGlkPSIuJHBob3Rv
X2lkLiJdL0B0aXRsZSIpKTsKCQkJCQkkcGhvdG9bJ3NlY3JldCddID0gYXJyYXlfc2hpZnQo
JHRoaXMtPnhtbC0+eHBhdGgoIi9yc3AvcGhvdG9zL3Bob3RvW0BpZD0iLiRwaG90b19pZC4i
XS9Ac2VjcmV0IikpOwoJCQkJCSRwaG90b1snb3JpZ2luYWxfc2VjcmV0J10gPSBhcnJheV9z
aGlmdCgkdGhpcy0+eG1sLT54cGF0aCgiL3JzcC9waG90b3MvcGhvdG9bQGlkPSIuJHBob3Rv
X2lkLiJdL0BvcmlnaW5hbHNlY3JldCIpKTsKCQkJCQkkcGhvdG9bJ29yaWdpbmFsX2Zvcm1h
dCddID0gYXJyYXlfc2hpZnQoJHRoaXMtPnhtbC0+eHBhdGgoIi9yc3AvcGhvdG9zL3Bob3Rv
W0BpZD0iLiRwaG90b19pZC4iXS9Ab3JpZ2luYWxmb3JtYXQiKSk7CgkJCQkJJHBob3RvWydz
ZXJ2ZXInXSA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCIvcnNwL3Bob3Rvcy9w
aG90b1tAaWQ9Ii4kcGhvdG9faWQuIl0vQHNlcnZlciIpKTsKCQkJCQkkcGhvdG9bJ2Zhcm0n
XSA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCIvcnNwL3Bob3Rvcy9waG90b1tA
aWQ9Ii4kcGhvdG9faWQuIl0vQGZhcm0iKSk7CgkJCQkJYXJyYXlfcHVzaCgkdGhpcy0+cGhv
dG9zLCAkcGhvdG8pOwoJCQkJfQoJCQkJJHRoaXMtPm51bWJlcl9vZl9waG90b3MgPSAoc3Ry
aW5nKSAkdGhpcy0+bGF0ZXN0OwoJCQkJaWYgKGlzc2V0KCR0aGlzLT5wYXJhbXNbJ3JhbmRv
bSddKSkgJHRoaXMtPnJhbmRvbWl6ZSgkdGhpcy0+cGFyYW1zWydyYW5kb20nXSk7CgkJCX0K
CQl9CgkJaWYgKGlzc2V0KCR0aGlzLT5zZXQpKSB7CgkJCSRtZXRob2QgPSAnZmxpY2tyLnBo
b3Rvc2V0cy5nZXRQaG90b3MnIC4gJHRoaXMtPnVzZXJkYXRhIC4gJyZwaG90b3NldF9pZD0n
IC4gJHRoaXMtPnNldCAuICImZXh0cmFzPW9yaWdpbmFsX2Zvcm1hdCI7CgkJCSR0aGlzLT54
bWwgPSBuZXcgRmxpY2tyKCRtZXRob2QpOwoJCQlpZigkdGhpcy0+eG1sLT5pc1ZhbGlkKCkp
IHsKCQkJCWZvcmVhY2goJHRoaXMtPnhtbC0+eHBhdGgoJy9yc3AvcGhvdG9zZXQvcGhvdG8v
QGlkJykgYXMgJHBob3RvX2lkKSB7CgkJCQkJJHBob3RvID0gYXJyYXkoJ2lkJyA9PiAkcGhv
dG9faWQpOwoJCQkJCSRwaG90b1sndGl0bGUnXSA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwt
PnhwYXRoKCIvcnNwL3Bob3Rvc2V0L3Bob3RvW0BpZD0iLiRwaG90b19pZC4iXS9AdGl0bGUi
KSk7CgkJCQkJJHBob3RvWydzZWNyZXQnXSA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhw
YXRoKCIvcnNwL3Bob3Rvc2V0L3Bob3RvW0BpZD0iLiRwaG90b19pZC4iXS9Ac2VjcmV0Iikp
OwoJCQkJCSRwaG90b1snb3JpZ2luYWxfc2VjcmV0J10gPSBhcnJheV9zaGlmdCgkdGhpcy0+
eG1sLT54cGF0aCgiL3JzcC9waG90b3NldC9waG90b1tAaWQ9Ii4kcGhvdG9faWQuIl0vQG9y
aWdpbmFsc2VjcmV0IikpOwoJCQkJCSRwaG90b1snb3JpZ2luYWxfZm9ybWF0J10gPSBhcnJh
eV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0aCgiL3JzcC9waG90b3NldC9waG90b1tAaWQ9Ii4k
cGhvdG9faWQuIl0vQG9yaWdpbmFsZm9ybWF0IikpOwoJCQkJCSRwaG90b1snc2VydmVyJ10g
PSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0aCgiL3JzcC9waG90b3NldC9waG90b1tA
aWQ9Ii4kcGhvdG9faWQuIl0vQHNlcnZlciIpKTsKCQkJCQkkcGhvdG9bJ2Zhcm0nXSA9IGFy
cmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCIvcnNwL3Bob3Rvc2V0L3Bob3RvW0BpZD0i
LiRwaG90b19pZC4iXS9AZmFybSIpKTsKCQkJCQlhcnJheV9wdXNoKCR0aGlzLT5waG90b3Ms
ICRwaG90byk7CgkJCQl9CgkJCQkkdGhpcy0+bnVtYmVyX29mX3Bob3RvcyA9IChzdHJpbmcp
IHNpemVvZigkdGhpcy0+cGhvdG9zKTsKCQkJCWlmIChpc3NldCgkdGhpcy0+cGFyYW1zWydy
YW5kb20nXSkpICR0aGlzLT5yYW5kb21pemUoJHRoaXMtPnBhcmFtc1sncmFuZG9tJ10pOwoJ
CQl9CgkJfQoJfQoKCWZ1bmN0aW9uIHJhbmRvbWl6ZSgkcmFuZHNpemUpIHsKCQlpZiAoJHJh
bmRzaXplIDwgJHRoaXMtPm51bWJlcl9vZl9waG90b3MpIHsKCQkJc2h1ZmZsZSgkdGhpcy0+
cGhvdG9zKTsKCQkJJHRoaXMtPnBob3RvcyA9IGFycmF5X3NsaWNlKCR0aGlzLT5waG90b3Ms
IDAsICRyYW5kc2l6ZSk7CgkJCSR0aGlzLT5udW1iZXJfb2ZfcGhvdG9zID0gJHJhbmRzaXpl
OwoJCX0KCX0KCglmdW5jdGlvbiBnZXRJbmZvKCkgewoJCSRtZXRob2QgPSAnZmxpY2tyLnBo
b3Rvc2V0cy5nZXRJbmZvJyAuICR0aGlzLT51c2VyZGF0YSAuICcmcGhvdG9zZXRfaWQ9JyAu
ICR0aGlzLT5zZXQ7CgkJJHRoaXMtPnhtbCA9IG5ldyBGbGlja3IoJG1ldGhvZCk7CgkJaWYo
JHRoaXMtPnhtbC0+aXNWYWxpZCgpKSB7CgkJCSR0aGlzLT5pZCA9IGFycmF5X3NoaWZ0KCR0
aGlzLT54bWwtPnhwYXRoKCcvcnNwL3Bob3Rvc2V0L0BpZCcpKTsKCQkJJHRoaXMtPnByaW1h
cnkgPSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0aCgnL3JzcC9waG90b3NldC9AcHJp
bWFyeScpKTsKCQkJJHRoaXMtPnNlY3JldCA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhw
YXRoKCcvcnNwL3Bob3Rvc2V0L0BzZWNyZXQnKSk7CgkJCSR0aGlzLT50aXRsZSA9IGFycmF5
X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCcvcnNwL3Bob3Rvc2V0L3RpdGxlL3RleHQoKScp
KTsKCQkJJHRoaXMtPmRlc2NyaXB0aW9uID0gYXJyYXlfc2hpZnQoJHRoaXMtPnhtbC0+eHBh
dGgoJy9yc3AvcGhvdG9zZXQvZGVzY3JpcHRpb24vdGV4dCgpJykpOwoJCQlpZiAoZW1wdHko
JHRoaXMtPmRlc2NyaXB0aW9uKSkgJHRoaXMtPmRlc2NyaXB0aW9uID0gJyZuYnNwOyc7CgkJ
fQoJfQoKCWZ1bmN0aW9uIHRodW1ibmFpbHNfdGl0bGUoKSB7CgkJaWYgKGlzc2V0KCR0aGlz
LT50aXRsZSkgPT0gZmFsc2UpICR0aGlzLT5nZXRJbmZvKCk7CgkJcmV0dXJuICR0aGlzLT50
aXRsZTsKCX0KCglmdW5jdGlvbiB0aHVtYm5haWxzX2Rlc2NyaXB0aW9uKCkgewoJCWlmICgo
aXNzZXQoJHRoaXMtPmRlc2NyaXB0aW9uKSA9PSBmYWxzZSkgYW5kIGlzc2V0KCR0aGlzLT5z
ZXQpKSB7CgkJCSR0aGlzLT5nZXRJbmZvKCk7CgkJfQoJCWlmICgkdGhpcy0+ZGVzY3JpcHRp
b24gIT0gJyZuYnNwOycgYW5kICFlbXB0eSgkdGhpcy0+ZGVzY3JpcHRpb24pKSByZXR1cm4g
JHRoaXMtPmRlc2NyaXB0aW9uOwoJCXJldHVybiAnJzsKCX0KCglmdW5jdGlvbiB0aHVtYm5h
aWxzX2lmX2Rlc2NyaXB0aW9uICgkdGhpbmcpIHsKCQlpZiAoKGlzc2V0KCR0aGlzLT5kZXNj
cmlwdGlvbikgPT0gZmFsc2UpIGFuZCBpc3NldCgkdGhpcy0+c2V0KSkgewoJCQkkdGhpcy0+
Z2V0SW5mbygpOwoJCX0KCQlpZiAoJHRoaXMtPmRlc2NyaXB0aW9uICE9ICcmbmJzcDsnIGFu
ZCAhZW1wdHkoJHRoaXMtPmRlc2NyaXB0aW9uKSkgJHJlc3VsdCA9IHBhcnNlKCR0aGluZyk7
CgkJcmV0dXJuICRyZXN1bHQ7Cgl9CgoJZnVuY3Rpb24gdGh1bWJuYWlsc19zbGlkZXNob3co
JHRoaW5nKSB7CgkJaWYoaXNzZXQoJHRoaXMtPnRhZ3MpKSB7CgkJCSRodG1sID0gJzxhIGhy
ZWY9Imh0dHA6Ly93d3cuZmxpY2tyLmNvbS9zbGlkZVNob3cvaW5kZXguZ25lP25zaWQ9Jy51
cmxlbmNvZGUoJHRoaXMtPm5zaWQpLicmYW1wO3VzZXJfaWQ9Jy51cmxlbmNvZGUoJHRoaXMt
Pm5zaWQpOwoJCQlpZihpc3NldCgkdGhpcy0+dGFnX2FuZCkpIHsKCQkJCSRodG1sIC49ICcm
YW1wO3RhZ19tb2RlPWFsbCZhbXA7dGFncz0nLiB1cmxlbmNvZGUoJHRoaXMtPnRhZ3MpOwoJ
CQl9CgkJCWVsc2UgewoJCQkJJGh0bWwgLj0gJyZhbXA7dGFnX21vZGU9YW55JmFtcDt0YWdz
PScgLiB1cmxlbmNvZGUoJHRoaXMtPnRhZ3MpOwoJCQl9CgkJCSRodG1sIC49ICciICBvbmNs
aWNrPSJ3aW5kb3cub3Blbih0aGlzLmhyZWYsIFwnc2xpZGVTaG93V2luXCcsIFwnd2lkdGg9
NTAwLGhlaWdodD01MDAsdG9wPTE1MCxsZWZ0PTcwLHNjcm9sbGJhcnM9bm8sIHN0YXR1cz1u
bywgcmVzaXphYmxlPW5vXCcpOyAnOwoJCQkkaHRtbCAuPSAncmV0dXJuIGZhbHNlOyI+JzsK
CQl9CgkJaWYoaXNzZXQoJHRoaXMtPnNldCkpIHsKCQkJJGh0bWwgPSAnPGEgaHJlZj0iaHR0
cDovL3d3dy5mbGlja3IuY29tL3NsaWRlU2hvdy9pbmRleC5nbmU/bnNpZD0nLnVybGVuY29k
ZSgkdGhpcy0+bnNpZCkuJyZhbXA7c2V0X2lkPScuJHRoaXMtPnNldDsKCQkJJGh0bWwgLj0g
JyIgIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuaHJlZiwgXCdzbGlkZVNob3dXaW5cJywg
XCd3aWR0aD01MDAsaGVpZ2h0PTUwMCx0b3A9MTUwLGxlZnQ9NzAsc2Nyb2xsYmFycz1ubywg
c3RhdHVzPW5vLCByZXNpemFibGU9bm9cJyk7ICc7CgkJCSRodG1sIC49ICdyZXR1cm4gZmFs
c2U7Ij4nOwoJCX0KCQlpZihpc3NldCgkdGhpcy0+bGF0ZXN0KSkgewoJCQkkaHRtbCA9ICc8
YSBocmVmPSJodHRwOi8vd3d3LmZsaWNrci5jb20vc2xpZGVTaG93L2luZGV4LmduZT9uc2lk
PScudXJsZW5jb2RlKCR0aGlzLT5uc2lkKS4nJmFtcDt1c2VyX2lkPScudXJsZW5jb2RlKCR0
aGlzLT5uc2lkKS4nJmFtcDttYXhUaHVtYnM9Jy4kdGhpcy0+bGF0ZXN0OwoJCQkkaHRtbCAu
PSAnIiAgb25jbGljaz0id2luZG93Lm9wZW4odGhpcy5ocmVmLCBcJ3NsaWRlU2hvd1dpblwn
LCBcJ3dpZHRoPTUwMCxoZWlnaHQ9NTAwLHRvcD0xNTAsbGVmdD03MCxzY3JvbGxiYXJzPW5v
LCBzdGF0dXM9bm8sIHJlc2l6YWJsZT1ub1wnKTsgJzsKCQkJJGh0bWwgLj0gJ3JldHVybiBm
YWxzZTsiPic7CgkJfQoJCSRodG1sIC49ICR0aGluZy4nPC9hPic7CgkJcmV0dXJuICRodG1s
OwoJfQoKCWZ1bmN0aW9uIHRodW1ibmFpbHNfaW1nKCkgewoJCSRpbWdfdXJsID0gJHRoaXMt
PmdldFBob3RvVXJsKCR0aGlzLT5waG90bywgJHRoaXMtPnRodW1ibmFpbF9zaXplKTsKCQkk
aW1nX3VybCA9ICc8aW1nIHNyYz0iJyAuICRpbWdfdXJsIC4gJyIgYWx0PSInIC4gJHRoaXMt
PnBob3RvWyd0aXRsZSddIC4gJyIgLz4nOwoJCXJldHVybiAkaW1nX3VybDsKCX0KCglmdW5j
dGlvbiB0aHVtYm5haWxzX2ltZ190aXRsZSgpIHsKCQlyZXR1cm4gJHRoaXMtPnBob3RvWyd0
aXRsZSddOwoJfQoKCWZ1bmN0aW9uIHRodW1ibmFpbHNfbGluaygkaW1nX3VybCwgJHRpdGxl
ID0iIikgewoJCWlmKCR0aGlzLT5vcGVuID09ICdzZWxmJykgewoJCQlpZiAoaXNzZXQoJHRo
aXMtPnNldCkpIHsKCQkJCSRwYXJhbWV0ZXJzWydzZXQnXSA9ICR0aGlzLT5zZXQ7CgkJCX0K
CQkJJHBhcmFtZXRlcnNbJ2ltZyddID0gJHRoaXMtPnBob3RvWydpZCddOwoJCQkkaHRtbCA9
IHRhZygkaW1nX3VybCwnYScsJyBocmVmPSInLiAkdGhpcy0+bWFrZVJlcXVlc3QoJHBhcmFt
ZXRlcnMpIC4nIicpLiJcbiI7CgkJfQoJCWlmKCR0aGlzLT5vcGVuID09ICdmbGlja3InKSB7
CgkJCSRodG1sID0gJzxhIGhyZWY9Imh0dHA6Ly93d3cuZmxpY2tyLmNvbS9waG90b3MvJyAu
IHVybGVuY29kZSgkdGhpcy0+bnNpZCkgLiAnLycgLiAkdGhpcy0+cGhvdG9bJ2lkJ10gLiAn
LyI+JyAuICJcbiI7CgkJCSRodG1sIC49ICRpbWdfdXJsOwoJCQkkaHRtbCAuPSAnPC9hPicg
LiAiXG4iOwoJCX0KCQlpZigkdGhpcy0+b3BlbiA9PSAnd2luZG93JykgewoJCQkkaHRtbCA9
ICc8YSBocmVmPSInOwoJCQkkaHRtbCAuPSAkdGhpcy0+Z2V0UGhvdG9VcmwoJHRoaXMtPnBo
b3RvLCAkdGhpcy0+aW1nX3NpemUpOwoJCQkkaHRtbCAuPSAnIiBvbmNsaWNrPSJ3aW5kb3cu
b3Blbih0aGlzLmhyZWYsIFwncG9wdXB3aW5kb3dcJywgXCdyZXNpemFibGVcJyk7IHJldHVy
biBmYWxzZTsiPic7CgkJCSRodG1sIC49ICRpbWdfdXJsOwoJCQkkaHRtbCAuPSAnPC9hPic7
CgkJfQoJCWlmKCR0aGlzLT5vcGVuID09ICdsaWdodGJveCcpIHsKCQkJJGh0bWwgPSAnPGEg
aHJlZj0iJzsKCQkJJGh0bWwgLj0gJHRoaXMtPmdldFBob3RvVXJsKCR0aGlzLT5waG90bywg
JHRoaXMtPmltZ19zaXplKTsKCQkJJHNldCA9ICR0aGlzLT50aHVtYm5haWxzX3RpdGxlKCk7
CgkJCSRzZXQgPSB0cmltKCRzZXQpOwoJCQkkaHRtbCAuPSAnIiByZWw9ImxpZ2h0Ym94Wycu
JHNldC4nXSInOwoJCQkkaHRtbCAuPSAnIHRpdGxlPSInLiR0aXRsZS4nIj4nOwoJCQkkaHRt
bCAuPSAkaW1nX3VybDsKCQkJJGh0bWwgLj0gJzwvYT4nOwoJCX0KCQlyZXR1cm4gJGh0bWw7
Cgl9CgoJZnVuY3Rpb24gdGh1bWJuYWlsc19saXN0KCRwYXJhbXMpIHsKCQlpZighJHRoaXMt
PnhtbC0+aXNWYWxpZCgpKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJKGlzc2V0KCRwYXJh
bXNbJ2xpc3Rtb2RlJ10pKT8KCQkkdGhpcy0+bGlzdG1vZGUgPSAkcGFyYW1zWydsaXN0bW9k
ZSddOgoJCSR0aGlzLT5saXN0bW9kZSA9ICdpbWcnOwoJCShpc3NldCgkcGFyYW1zWyd3cmFw
dGFnJ10pID09IHRydWUpPyAkd3JhcHRhZyA9ICRwYXJhbXNbJ3dyYXB0YWcnXSA6ICR3cmFw
dGFnID0gJyc7CgkJKGlzc2V0KCRwYXJhbXNbJ2JyZWFrJ10pID09IHRydWUpPyAkYnJlYWsg
PSAkcGFyYW1zWydicmVhayddIDogJGJyZWFrID0gJyc7CgkJaWYgKCR0aGlzLT50aHVtYnNf
cGVyX3BhZ2UgPT0gMCkgewoJCQkkdGhpcy0+c3RhcnQgPSAxOwoJCQkkdGhpcy0+ZW5kID0g
c2l6ZW9mKCR0aGlzLT5waG90b3MpOwoJCX0KCQllbHNlIHsKCQkJJHRoaXMtPnN0YXJ0ID0g
KGZsb2F0KSAoJHRoaXMtPnRodW1ic19wZXJfcGFnZSAqICgkdGhpcy0+cGFnZSAtIDEpKSAr
IDE7CgkJCSR0aGlzLT5lbmQgPSBtaW4oJHRoaXMtPnRodW1ic19wZXJfcGFnZSAqICR0aGlz
LT5wYWdlLCBzaXplb2YoJHRoaXMtPnBob3RvcykpOwoJCX0KCQkkaHRtbCA9ICcnOwoJCWZv
ciAoJHRoaXMtPmkgPSAkdGhpcy0+c3RhcnQgLSAxOyAkdGhpcy0+aSA8PSAkdGhpcy0+ZW5k
IC0gMTsgJHRoaXMtPmkrKykgewoJCQkkdGhpcy0+cGhvdG8gPSAkdGhpcy0+cGhvdG9zWyR0
aGlzLT5pXTsKCQkJKEAkX0dFVFsnaW1nJ10gPT0gKGZsb2F0KSAkdGhpcy0+cGhvdG9bJ2lk
J10pPyAkcGFyYW0gPSAnIGNsYXNzPSJjdXJyZW50IicgOiAnJzsKCQkJKCR0aGlzLT5saXN0
bW9kZSA9PSAnaW1nJyk/ICR3aGF0ID0gJHRoaXMtPnRodW1ibmFpbHNfaW1nKCkgOiAkd2hh
dCA9ICR0aGlzLT50aHVtYm5haWxzX2ltZ190aXRsZSgpOwoJCQkoJHRoaXMtPmxpbmt0aHVt
YnMgPT0gMSk/ICR3aGF0ID0gJHRoaXMtPnRodW1ibmFpbHNfbGluaygkd2hhdCwgJHRoaXMt
PnBob3RvWyJ0aXRsZSJdKSA6ICcnOwoJCQlpZigkYnJlYWsgIT0gJycpIHsKCQkJCSgkYnJl
YWsgIT0gJ2JyJyk/CgkJCQkkaHRtbCAuPSB0YWcoJHdoYXQsICRicmVhaywgJHBhcmFtKSAu
ICJcbiI6CgkJCQkkaHRtbCAuPSAkd2hhdCAuJzxiciAvPicgLiAiXG4iOwoJCQl9CgkJCWVs
c2UgewoJCQkJJGh0bWwgLj0gJHdoYXQgLiAiXG4iOwoJCQl9CgkJCXVuc2V0KCRwYXJhbSk7
CgkJfQoJCXJldHVybiAoKCR3cmFwdGFnICE9ICcnKSA9PSB0cnVlKT8gdGFnKCRodG1sLCAk
d3JhcHRhZykgOiAkaHRtbDsKCX0KCglmdW5jdGlvbiB0aHVtYm5haWxzX251bWJlcl9vZl9w
aG90b3MgKCkgewoJCXJldHVybiAkdGhpcy0+bnVtYmVyX29mX3Bob3RvczsKCX0KCglmdW5j
dGlvbiB0aHVtYm5haWxzX3Blcl9wYWdlICgpIHsKCQlyZXR1cm4gJHRoaXMtPnRodW1ic19w
ZXJfcGFnZTsKCX0KCglmdW5jdGlvbiB0aHVtYm5haWxzX2N1cnJlbnRfcGFnZSAoKSB7CgkJ
cmV0dXJuICR0aGlzLT5wYWdlOwoJfQoKCWZ1bmN0aW9uIHRodW1ibmFpbHNfdG90YWxfcGFn
ZXMgKCkgewoJCXJldHVybiAkdGhpcy0+bGFzdHBhZ2U7Cgl9CgoJZnVuY3Rpb24gdGh1bWJu
YWlsc19wYWdlc19maXJzdCAoJHRoaW5nKSB7CgkJaWYgKGlzc2V0KCR0aGlzLT5zZXQpKSAk
cmVzdWx0ID0gdGFnKHBhcnNlKCR0aGluZyksICdhJywgJyBocmVmPSInLiAkdGhpcy0+bWFr
ZVJlcXVlc3QoYXJyYXkoJ3NldCcgPT4gJHRoaXMtPmlkLCAncGFnZScgPT4gMSkpIC4nIicp
OwoJCWlmIChpc3NldCgkdGhpcy0+dGFncykpICRyZXN1bHQgPSB0YWcocGFyc2UoJHRoaW5n
KSwgJ2EnLCAnIGhyZWY9IicuICR0aGlzLT5tYWtlUmVxdWVzdChhcnJheSgndGFncycgPT4g
JHRoaXMtPnRhZ3MsICdwYWdlJyA9PiAxKSkgLiciJyk7CgkJaWYgKGlzc2V0KCR0aGlzLT5s
YXRlc3QpKSAkcmVzdWx0ID0gdGFnKHBhcnNlKCR0aGluZyksICdhJywgJyBocmVmPSInLiAk
dGhpcy0+bWFrZVJlcXVlc3QoYXJyYXkoJ3BhZ2UnID0+IDEpKSAuJyInKTsKCQlyZXR1cm4g
JHJlc3VsdDsKCX0KCglmdW5jdGlvbiB0aHVtYm5haWxzX3BhZ2VzX2xhc3QgKCR0aGluZykg
ewoJCWlmIChpc3NldCgkdGhpcy0+c2V0KSkgJHJlc3VsdCA9IHRhZyhwYXJzZSgkdGhpbmcp
LCAnYScsICcgaHJlZj0iJy4gJHRoaXMtPm1ha2VSZXF1ZXN0KGFycmF5KCdzZXQnID0+ICR0
aGlzLT5pZCwgJ3BhZ2UnID0+ICR0aGlzLT5sYXN0cGFnZSkpIC4nIicpOwoJCWlmIChpc3Nl
dCgkdGhpcy0+dGFncykpICRyZXN1bHQgPSB0YWcocGFyc2UoJHRoaW5nKSwgJ2EnLCAnIGhy
ZWY9IicuICR0aGlzLT5tYWtlUmVxdWVzdChhcnJheSgndGFncycgPT4gJHRoaXMtPnRhZ3Ms
ICdwYWdlJyA9PiAkdGhpcy0+bGFzdHBhZ2UpKSAuJyInKTsKCQlpZiAoaXNzZXQoJHRoaXMt
PmxhdGVzdCkpICRyZXN1bHQgPSB0YWcocGFyc2UoJHRoaW5nKSwgJ2EnLCAnIGhyZWY9Iicu
ICR0aGlzLT5tYWtlUmVxdWVzdChhcnJheSgncGFnZScgPT4gJHRoaXMtPmxhc3RwYWdlKSkg
LiciJyk7CgkJcmV0dXJuICRyZXN1bHQ7Cgl9CgoJZnVuY3Rpb24gdGh1bWJuYWlsc19wYWdl
c19wcmV2aW91cyAoJHRoaW5nKSB7CgkJaWYgKGlzc2V0KCR0aGlzLT5zZXQpKSAkcmVzdWx0
ID0gdGFnKHBhcnNlKCR0aGluZyksICdhJywgJyBocmVmPSInLiAkdGhpcy0+bWFrZVJlcXVl
c3QoYXJyYXkoJ3NldCcgPT4gJHRoaXMtPmlkLCAncGFnZScgPT4gJHRoaXMtPnByZXZpb3Vz
X3BhZ2UpKSAuJyInKTsKCQlpZiAoaXNzZXQoJHRoaXMtPnRhZ3MpKSAkcmVzdWx0ID0gdGFn
KHBhcnNlKCR0aGluZyksICdhJywgJyBocmVmPSInLiAkdGhpcy0+bWFrZVJlcXVlc3QoYXJy
YXkoJ3RhZ3MnID0+ICR0aGlzLT50YWdzLCAncGFnZScgPT4gJHRoaXMtPnByZXZpb3VzX3Bh
Z2UpKSAuJyInKTsKCQlpZiAoaXNzZXQoJHRoaXMtPmxhdGVzdCkpICRyZXN1bHQgPSB0YWco
cGFyc2UoJHRoaW5nKSwgJ2EnLCAnIGhyZWY9IicuICR0aGlzLT5tYWtlUmVxdWVzdChhcnJh
eSgncGFnZScgPT4gJHRoaXMtPnByZXZpb3VzX3BhZ2UpKSAuJyInKTsKCQlyZXR1cm4gJHJl
c3VsdDsKCX0KCglmdW5jdGlvbiB0aHVtYm5haWxzX3BhZ2VzX25leHQgKCR0aGluZykgewoJ
CWlmIChpc3NldCgkdGhpcy0+c2V0KSkgJHJlc3VsdCA9IHRhZyhwYXJzZSgkdGhpbmcpLCAn
YScsICcgaHJlZj0iJy4gJHRoaXMtPm1ha2VSZXF1ZXN0KGFycmF5KCdzZXQnID0+ICR0aGlz
LT5pZCwgJ3BhZ2UnID0+ICR0aGlzLT5uZXh0X3BhZ2UpKSAuJyInKTsKCQlpZiAoaXNzZXQo
JHRoaXMtPnRhZ3MpKSAkcmVzdWx0ID0gdGFnKHBhcnNlKCR0aGluZyksICdhJywgJyBocmVm
PSInLiAkdGhpcy0+bWFrZVJlcXVlc3QoYXJyYXkoJ3RhZ3MnID0+ICR0aGlzLT50YWdzLCAn
cGFnZScgPT4gJHRoaXMtPm5leHRfcGFnZSkpIC4nIicpOwoJCWlmIChpc3NldCgkdGhpcy0+
bGF0ZXN0KSkgJHJlc3VsdCA9IHRhZyhwYXJzZSgkdGhpbmcpLCAnYScsICcgaHJlZj0iJy4g
JHRoaXMtPm1ha2VSZXF1ZXN0KGFycmF5KCdwYWdlJyA9PiAkdGhpcy0+bmV4dF9wYWdlKSkg
LiciJyk7CgkJcmV0dXJuICRyZXN1bHQ7Cgl9CgoJZnVuY3Rpb24gdGh1bWJuYWlsc19wYWdl
c19zdGFydHRodW1iICgpIHsKCQlyZXR1cm4gJHRoaXMtPnN0YXJ0OwoJfQoKCWZ1bmN0aW9u
IHRodW1ibmFpbHNfcGFnZXNfZW5kdGh1bWIgKCkgewoJCXJldHVybiAkdGhpcy0+ZW5kOwoJ
fQoKCWZ1bmN0aW9uIHRodW1ibmFpbHNfcGFnZXNfbGlzdCAoJHBhcmFtcykgewoJCSRwYWdl
c19hcnJheSA9IHJhbmdlKDEsICR0aGlzLT5sYXN0cGFnZSk7CgkJZm9yICgkaSA9IDA7ICRp
IDw9ICR0aGlzLT5sYXN0cGFnZSAtIDE7ICRpKyspIHsKCQkJaWYgKGlzc2V0KCR0aGlzLT5z
ZXQpKSAkcGFnZXNfYXJyYXlbJGldID0gdGFnKCRwYWdlc19hcnJheVskaV0sICdhJywgJyBo
cmVmPSInLiAkdGhpcy0+bWFrZVJlcXVlc3QoYXJyYXkoJ3NldCcgPT4gJHRoaXMtPmlkLCAn
cGFnZScgPT4gJHBhZ2VzX2FycmF5WyRpXSkpIC4nIicpOwoJCQlpZiAoaXNzZXQoJHRoaXMt
PnRhZ3MpKSAkcGFnZXNfYXJyYXlbJGldID0gdGFnKCRwYWdlc19hcnJheVskaV0sICdhJywg
JyBocmVmPSInLiAkdGhpcy0+bWFrZVJlcXVlc3QoYXJyYXkoJ3RhZ3MnID0+ICR0aGlzLT50
YWdzLCAncGFnZScgPT4gJHBhZ2VzX2FycmF5WyRpXSkpIC4nIicpOwoJCQlpZiAoaXNzZXQo
JHRoaXMtPmxhdGVzdCkpICRwYWdlc19hcnJheVskaV0gPSB0YWcoJHBhZ2VzX2FycmF5WyRp
XSwgJ2EnLCAnIGhyZWY9IicuICR0aGlzLT5tYWtlUmVxdWVzdChhcnJheSgncGFnZScgPT4g
JHBhZ2VzX2FycmF5WyRpXSkpIC4nIicpOwoJCX0KCQlyZXR1cm4gZG9XcmFwKCRwYWdlc19h
cnJheSwgQCRwYXJhbXNbJ3dyYXB0YWcnXSwgQCRwYXJhbXNbJ2JyZWFrJ10sIEAkcGFyYW1z
WydjbGFzcyddLCBAJHBhcmFtc1snYnJlYWtjbGFzcyddLCBAJHBhcmFtc1snYXR0cyddKTsK
CX0KCglmdW5jdGlvbiB0aHVtYm5haWxzX2lmX211bHRpcGxlX3BhZ2VzICgkdGhpbmcpIHsK
CQkoJHRoaXMtPnRodW1ic19wZXJfcGFnZSAhPSAwKT8gJHJlc3VsdCA9IHBhcnNlKCR0aGlu
ZykgOiAnJzsKCQlyZXR1cm4gJHJlc3VsdDsKCX0KCglmdW5jdGlvbiBfX3RvU3RyaW5nKCkg
ewoJCWlmKCEkdGhpcy0+eG1sLT5pc1ZhbGlkKCkpIHsKCQkJcmV0dXJuICRHTE9CQUxTWyd0
ZXh0J11bJ2Vycm9yX21lc3NhZ2UnXTsKCQl9CgkJJHJlc3VsdCA9IHBhcnNlKCR0aGlzLT5m
b3JtKTsKCQlyZXR1cm4gJHJlc3VsdDsKCX0KfQoKCmNsYXNzIFBpY3R1cmUgZXh0ZW5kcyBW
ZGhfRmxpY2tyIHsKCXZhciAkeG1sLCAkaWQsICRzZWNyZXQsICRzZXJ2ZXIsICRkYXRlX3Vw
bG9hZGVkLCAkdGl0bGUsICRkZXNjcmlwdGlvbiwgJG5vdGVzLCAkc2V0LCAkbGluaywgJGlt
ZywgJGNvbnRleHQ7Cgl2YXIgJGltZ19zaXplLCAkc2hvd19pbWdfbmF2LCAkc2hvd19pbWdf
dGl0bGUsICRtZXRob2QsICRzZXRfdGl0bGUsICRjb21tZW50cywgJGNvbnRleHRfbW9kZTsK
CXZhciAkZGF0ZV9wb3N0ZWQsICRkYXRlX3Rha2VuOwoJdmFyICRwcmV2aW91cyA9IGFycmF5
KCksICRuZXh0ID0gYXJyYXkoKSwgJHRhZ3MgPSBhcnJheSgpLCAkcmF3X3RhZ3MgPSBhcnJh
eSgpLCAkdGFnX2lkcyA9IGFycmF5KCk7CgoJZnVuY3Rpb24gUGljdHVyZSgkcGFyYW1zKSB7
CgkJJHRoaXMtPlZkaF9GbGlja3IoJHBhcmFtcyk7CgkJKGlzc2V0KCRwYXJhbXNbJ2ltZ19z
aXplJ10pKT8KCQkkdGhpcy0+aW1nX3NpemUgPSAkcGFyYW1zWydpbWdfc2l6ZSddOgoJCSR0
aGlzLT5pbWdfc2l6ZSA9ICduJzsKCQkoaXNzZXQoJHBhcmFtc1snb3JpZ2luYWxfc2l6ZSdd
KSk/CgkJJHRoaXMtPm9yaWdpbmFsX3NpemUgPSAkcGFyYW1zWydvcmlnaW5hbF9zaXplJ106
CgkJJHRoaXMtPm9yaWdpbmFsX3NpemUgPSAnbyc7CgkJKGlzc2V0KCRwYXJhbXNbJ3NldCdd
KSk/CgkJJHRoaXMtPnNldCA9ICRwYXJhbXNbJ3NldCddOgoJCSR0aGlzLT5zZXQgPSAkX0dF
VFsnc2V0J107CgkJKGlzc2V0KCRwYXJhbXNbJ2ltZyddKSk/CgkJJHRoaXMtPmltZyA9ICRw
YXJhbXNbJ2ltZyddOgoJCSR0aGlzLT5pbWcgPSAkX0dFVFsnaW1nJ107CgkJJG1ldGhvZCA9
ICdmbGlja3IucGhvdG9zLmdldEluZm8nIC4gJHRoaXMtPnVzZXJkYXRhIC4gJyZwaG90b19p
ZD0nIC4gJHRoaXMtPmltZzsKCQkkdGhpcy0+eG1sID0gbmV3IEZsaWNrcigkbWV0aG9kKTsK
CQlpZigkdGhpcy0+eG1sLT5pc1ZhbGlkKCkpIHsKCQkJJHRoaXMtPmlkID0gYXJyYXlfc2hp
ZnQoJHRoaXMtPnhtbC0+eHBhdGgoJy9yc3AvcGhvdG8vQGlkJykpOwoJCQkkdGhpcy0+c2Vj
cmV0ID0gYXJyYXlfc2hpZnQoJHRoaXMtPnhtbC0+eHBhdGgoJy9yc3AvcGhvdG8vQHNlY3Jl
dCcpKTsKCQkJJHRoaXMtPm9yaWdpbmFsX3NlY3JldCA9IGFycmF5X3NoaWZ0KCR0aGlzLT54
bWwtPnhwYXRoKCcvcnNwL3Bob3RvL0BvcmlnaW5hbHNlY3JldCcpKTsKCQkJJHRoaXMtPm9y
aWdpbmFsX2Zvcm1hdCA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCcvcnNwL3Bo
b3RvL0BvcmlnaW5hbGZvcm1hdCcpKTsKCQkJJHRoaXMtPmZhcm0gPSBhcnJheV9zaGlmdCgk
dGhpcy0+eG1sLT54cGF0aCgnL3JzcC9waG90by9AZmFybScpKTsKCQkJJHRoaXMtPnNlcnZl
ciA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCcvcnNwL3Bob3RvL0BzZXJ2ZXIn
KSk7CgkJCSR0aGlzLT5kYXRlX3Bvc3RlZCA9IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhw
YXRoKCcvcnNwL3Bob3RvL2RhdGVzL0Bwb3N0ZWQnKSk7CgkJCSR0aGlzLT5kYXRlX3Rha2Vu
ID0gYXJyYXlfc2hpZnQoJHRoaXMtPnhtbC0+eHBhdGgoJy9yc3AvcGhvdG8vZGF0ZXMvQHRh
a2VuJykpOwoJCQkkdGhpcy0+dGl0bGUgPSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0
aCgnL3JzcC9waG90by90aXRsZS90ZXh0KCknKSk7CgkJCSR0aGlzLT5kZXNjcmlwdGlvbiA9
IGFycmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCcvcnNwL3Bob3RvL2Rlc2NyaXB0aW9u
L3RleHQoKScpKTsKCQkJJHRoaXMtPmNvbW1lbnRzID0gYXJyYXlfc2hpZnQoJHRoaXMtPnht
bC0+eHBhdGgoJy9yc3AvcGhvdG8vY29tbWVudHMvdGV4dCgpJykpOwoJCQkkdGhpcy0+cmF3
X3RhZ3MgPSAkdGhpcy0+eG1sLT54cGF0aCgnL3JzcC9waG90by90YWdzL3RhZy9AcmF3Jyk7
CgkJCSR0aGlzLT50YWdzID0gJHRoaXMtPnhtbC0+eHBhdGgoJy9yc3AvcGhvdG8vdGFncy90
YWcvdGV4dCgpJyk7CgkJCSR0aGlzLT5saW5rID0gQCRwYXJhbXNbJ2xpbmsnXTsKCQl9CgkJ
aWYgKGlzc2V0KCRwYXJhbXNbJ2ltZ19mb3JtJ10pKSB7CgkJCSR0aGlzLT5mb3JtID0gZmV0
Y2goJ0Zvcm0nLCd0eHBfZm9ybScsIm5hbWUiLCRwYXJhbXNbJ2ltZ19mb3JtJ10pOwoJCX0K
CQllbHNlIHsKCQkJJHRoaXMtPmZvcm0gPSAnCgkJCTxkaXYgY2xhc3M9ImluZGl2aWR1YWwi
PjxkaXYgY2xhc3M9ImltYWdlIj4KCQkJPGgyIGNsYXNzPSJ0aXRsZSI+PHR4cDp2ZGhfZmxp
Y2tyX2ltZ190aXRsZSAvPjwvaDI+CgkJCTx0eHA6dmRoX2ZsaWNrcl9pbWdfbGluaz48dHhw
OnZkaF9mbGlja3JfaW1nX25ha2VkIC8+PC90eHA6dmRoX2ZsaWNrcl9pbWdfbGluaz4KCQkJ
PGRpdiBjbGFzcz0iZmxpY2tyc2V0bmF2Ij4KCQkJPHR4cDp2ZGhfZmxpY2tyX2ltZ19wcmV2
aW91cyBsYWJlbD0icHJldmlvdXMmbmJzcDs6Jm5ic3A7Ij4mbGFycjs8L3R4cDp2ZGhfZmxp
Y2tyX2ltZ19wcmV2aW91cz4KCQkJPGgyIGNsYXNzPSJzZXRuYW1lIj48dHhwOnZkaF9mbGlj
a3JfaW1nX3NldF9saW5rPjx0eHA6dmRoX2ZsaWNrcl9pbWdfc2V0X3RpdGxlIC8+PC90eHA6
dmRoX2ZsaWNrcl9pbWdfc2V0X2xpbms+PC9oMj4KCQkJPHR4cDp2ZGhfZmxpY2tyX2ltZ19u
ZXh0IGxhYmVsPSJuZXh0Jm5ic3A7OiZuYnNwOyI+JnJhcnI7PC90eHA6dmRoX2ZsaWNrcl9p
bWdfbmV4dD4KCQkJPC9kaXY+CgkJCTxkaXYgY2xhc3M9ImZsaWNrcl90YWdfbGlzdCI+CgkJ
CTx0eHA6dmRoX2ZsaWNrcl9pbWdfdGFncyBzZXBhcmF0b3I9IiB8ICIgLz4KCQkJPC9kaXY+
CgkJCTxkaXYgY2xhc3M9ImZsaWNrcl9jb21tZW50cyI+CgkJCTx0eHA6dmRoX2ZsaWNrcl9p
bWdfbnVtYmVyX29mX2NvbW1lbnRzIC8+IENvbW1lbnRzLgoJCQk8dHhwOnZkaF9mbGlja3Jf
aW1nX2NvbW1lbnRzX2ludml0ZT5TaG93IGFuZCBwb3N0IGNvbW1lbnRzITwvdHhwOnZkaF9m
bGlja3JfaW1nX2NvbW1lbnRzX2ludml0ZT48YnIgLz4KCQkJUG9zdGVkIDx0eHA6dmRoX2Zs
aWNrcl9pbWdfZGF0ZV9wb3N0ZWQgLz4uPGJyIC8+CgkJCVRha2VuIDx0eHA6dmRoX2ZsaWNr
cl9pbWdfZGF0ZV90YWtlbiAvPi48YnIgLz4KCQkJPC9kaXY+CgkJCTx0eHA6dmRoX2ZsaWNr
cl9pbWdfaWZfZGVzY3JpcHRpb24+CgkJCTxwIGNsYXNzPSJpbWdfZGVzY3JpcHRpb24iPgoJ
CQk8dHhwOnZkaF9mbGlja3JfaW1nX2Rlc2NyaXB0aW9uIC8+CgkJCTwvcD4KCQkJPC90eHA6
dmRoX2ZsaWNrcl9pbWdfaWZfZGVzY3JpcHRpb24+CgkJCTwvZGl2PjwvZGl2PjxkaXYgc3R5
bGU9ImNsZWFyOmJvdGg7Ij48L2Rpdj4nOwoJCX0KCX0KCglmdW5jdGlvbiBnZXRDb250ZXh0
KCkgewoJCWlmIChpc3NldCgkdGhpcy0+c2V0KSkgewoJCQkkbWV0aG9kID0gJ2ZsaWNrci5w
aG90b3NldHMuZ2V0Q29udGV4dCcgLiAkdGhpcy0+dXNlcmRhdGEgLiAnJnBob3RvX2lkPScg
LiAkdGhpcy0+aW1nIC4gJyZwaG90b3NldF9pZD0nIC4gJHRoaXMtPnNldDsKCQl9CgkJZWxz
ZSB7CgkJCSRtZXRob2QgPSAnZmxpY2tyLnBob3Rvcy5nZXRDb250ZXh0JyAuICR0aGlzLT51
c2VyZGF0YSAuICcmcGhvdG9faWQ9JyAuICR0aGlzLT5pbWc7CgkJfQoJCSR0aGlzLT54bWwg
PSBuZXcgRmxpY2tyKCRtZXRob2QpOwoJCSR0aGlzLT5wcmV2aW91c1snaWQnXSA9IGFycmF5
X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCcvcnNwL3ByZXZwaG90by9AaWQnKSk7CgkJJHRo
aXMtPnByZXZpb3VzWyd0aXRsZSddID0gYXJyYXlfc2hpZnQoJHRoaXMtPnhtbC0+eHBhdGgo
Jy9yc3AvcHJldnBob3RvL0B0aXRsZScpKTsKCQkkdGhpcy0+cHJldmlvdXNbJ3RodW1iJ10g
PSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0aCgnL3JzcC9wcmV2cGhvdG8vQHRodW1i
JykpOwoJCSR0aGlzLT5uZXh0WydpZCddID0gYXJyYXlfc2hpZnQoJHRoaXMtPnhtbC0+eHBh
dGgoJy9yc3AvbmV4dHBob3RvL0BpZCcpKTsKCQkkdGhpcy0+bmV4dFsndGl0bGUnXSA9IGFy
cmF5X3NoaWZ0KCR0aGlzLT54bWwtPnhwYXRoKCcvcnNwL25leHRwaG90by9AdGl0bGUnKSk7
CgkJJHRoaXMtPm5leHRbJ3RodW1iJ10gPSBhcnJheV9zaGlmdCgkdGhpcy0+eG1sLT54cGF0
aCgnL3JzcC9uZXh0cGhvdG8vQHRodW1iJykpOwoJCSR0aGlzLT5jb250ZXh0ID0gdHJ1ZTsK
CX0KCglmdW5jdGlvbiBpbWdfbmFrZWQoKSB7CgkJJHBob3RvID0gYXJyYXkoImZhcm0iID0+
ICR0aGlzLT5mYXJtLCAic2VydmVyIiA9PiAkdGhpcy0+c2VydmVyLCAiaWQiID0+ICR0aGlz
LT5pZCwgInNlY3JldCIgPT4gJHRoaXMtPnNlY3JldCwgIm9yaWdpbmFsX3NlY3JldCIgPT4g
JHRoaXMtPm9yaWdpbmFsX3NlY3JldCwgIm9yaWdpbmFsX2Zvcm1hdCIgPT4gJHRoaXMtPm9y
aWdpbmFsX2Zvcm1hdCk7CgkJJGltZ191cmwgPSAkdGhpcy0+Z2V0UGhvdG9VcmwoJHBob3Rv
LCAkdGhpcy0+aW1nX3NpemUpOwoJCSRpbWdfdXJsID0gJzxpbWcgc3JjPSInIC4gJGltZ191
cmwgLiAnIiBhbHQ9IicgLiAkdGhpcy0+dGl0bGUgLiAnIiAvPic7CgkJcmV0dXJuICRpbWdf
dXJsOwoJfQoKCWZ1bmN0aW9uIGltZ19saW5rKCRpbWdfdXJsKSB7CgkJaWYgKGlzc2V0KCR0
aGlzLT5saW5rKSl7CgkJCXN3aXRjaCgkdGhpcy0+bGluaykgewoJCQkJY2FzZSAiZmxpY2ty
IjoKCQkJCSRsaW5rX3RhcmdldCA9ICdodHRwOi8vd3d3LmZsaWNrci5jb20vcGhvdG9zLycg
LiB1cmxlbmNvZGUoJHRoaXMtPm5zaWQpIC4gJy8nIC4gJHRoaXMtPmlkIC4gJy8nOwoJCQkJ
YnJlYWs7CgkJCQljYXNlICJvcmlnaW5hbF9zaXplIiB8fCAibGlnaHRib3giOgoJCQkJJHBo
b3RvID0gYXJyYXkoImZhcm0iID0+ICR0aGlzLT5mYXJtLCAic2VydmVyIiA9PiAkdGhpcy0+
c2VydmVyLCAiaWQiID0+ICR0aGlzLT5pZCwgInNlY3JldCIgPT4gJHRoaXMtPnNlY3JldCwg
Im9yaWdpbmFsX3NlY3JldCIgPT4gJHRoaXMtPm9yaWdpbmFsX3NlY3JldCwgIm9yaWdpbmFs
X2Zvcm1hdCIgPT4gJHRoaXMtPm9yaWdpbmFsX2Zvcm1hdCk7CgkJCQkkbGlua190YXJnZXQg
PSAkdGhpcy0+Z2V0UGhvdG9VcmwoJHBob3RvLCAkdGhpcy0+b3JpZ2luYWxfc2l6ZSk7CgkJ
CQlicmVhazsKCQkJCWNhc2UgImltZ19pbmZvcm1hdGlvbiI6CgkJCQkkbGlua190YXJnZXQg
PSAnaHR0cDovL3d3dy5mbGlja3IuY29tL3Bob3RvX2V4aWYuZ25lP2lkPScgLiAkdGhpcy0+
aWQ7CgkJCQlicmVhazsKCQkJfQoJCQkkbGlua19hdHRyaWJ1dGVzID0gJyBocmVmPSInIC4g
JGxpbmtfdGFyZ2V0IC4gJyInOwoJCQlpZiAoJHRoaXMtPmxpbmsgPT0gImxpZ2h0Ym94Iikg
ewoJCQkJJGxpbmtfYXR0cmlidXRlcyAuPSAnIHJlbD0ibGlnaHRib3giJzsKCQkJfQoJCQkk
aW1nX3VybCA9IHRhZygkaW1nX3VybCwgJ2EnLCAkbGlua19hdHRyaWJ1dGVzKTsKCQkJJGlt
Z191cmwgLj0gIlxuIjsKCQl9CgkJcmV0dXJuICRpbWdfdXJsOwoJfQoKCWZ1bmN0aW9uIGlt
Z19wcmV2aW91cygkbGFiZWwsICR0aGluZykgewoJCWlmICghaXNzZXQoJHRoaXMtPmNvbnRl
eHQpKSAkdGhpcy0+Z2V0Q29udGV4dCgpOwoJCSR0aGlzLT5wcmV2aW91c1snaWQnXSA9IChm
bG9hdCkgKCR0aGlzLT5wcmV2aW91c1snaWQnXSk7CgkJaWYgKCR0aGlzLT5wcmV2aW91c1sn
aWQnXSAhPSAwKSB7CgkJCSR0aXRsZSA9ICAkdGhpcy0+cHJldmlvdXNbJ3RpdGxlJ107CgkJ
CSRlbmQgPSAnIiB0aXRsZT0iJy4gJGxhYmVsIC4gJHRpdGxlOwoJCQlpZiAoaXNzZXQoJHRo
aXMtPnNldCkpICRodG1sID0gdGFnKCR0aGluZywnYScsJyBocmVmPSInLiAkdGhpcy0+bWFr
ZVJlcXVlc3QoYXJyYXkoJ3NldCcgPT4gJHRoaXMtPnNldCwgJ2ltZycgPT4gJHRoaXMtPnBy
ZXZpb3VzWydpZCddKSkgLiRlbmQuJyInKS4iXG4iOwoJCQllbHNlICRodG1sID0gdGFnKCR0
aGluZywnYScsJyBocmVmPSInLiAkdGhpcy0+bWFrZVJlcXVlc3QoYXJyYXkoJ2ltZycgPT4g
JHRoaXMtPnByZXZpb3VzWydpZCddKSkgLiRlbmQuJyInKS4iXG4iOwoJCX0KCQlyZXR1cm4g
JGh0bWw7Cgl9CgoJZnVuY3Rpb24gaW1nX3ByZXZpb3VzX3RodW1ibmFpbCgpIHsKCQlpZiAo
IWlzc2V0KCR0aGlzLT5jb250ZXh0KSkgJHRoaXMtPmdldENvbnRleHQoKTsKCQkkdGhpcy0+
cHJldmlvdXNbJ2lkJ10gPSAoZmxvYXQpICgkdGhpcy0+cHJldmlvdXNbJ2lkJ10pOwoJCWlm
ICgkdGhpcy0+cHJldmlvdXNbJ2lkJ10gIT0gMCkgewoJCQkkcmVzdWx0ID0gJzxpbWcgc3Jj
PSInIC4gJHRoaXMtPnByZXZpb3VzWyd0aHVtYiddIC4gJyIgYWx0PSInIC4gJHRpdGxlIC4g
JyIgLz4nOwoJCX0KCQlyZXR1cm4gJHJlc3VsdDsKCX0KCglmdW5jdGlvbiBpbWdfbmV4dCgk
bGFiZWwsICR0aGluZykgewoJCWlmICghaXNzZXQoJHRoaXMtPmNvbnRleHQpKSAkdGhpcy0+
Z2V0Q29udGV4dCgpOwoJCSR0aGlzLT5uZXh0WydpZCddID0gKGZsb2F0KSAoJHRoaXMtPm5l
eHRbJ2lkJ10pOwoJCWlmICgkdGhpcy0+bmV4dFsnaWQnXSAhPSAwKSB7CgkJCSR0aXRsZSA9
ICAkdGhpcy0+bmV4dFsndGl0bGUnXTsKCQkJJGVuZCA9ICciIHRpdGxlPSInLiAkbGFiZWwg
LiAkdGl0bGU7CgkJCWlmIChpc3NldCgkdGhpcy0+c2V0KSkgJGh0bWwgPSB0YWcoJHRoaW5n
LCdhJywnIGhyZWY9IicuICR0aGlzLT5tYWtlUmVxdWVzdChhcnJheSgnc2V0JyA9PiAkdGhp
cy0+c2V0LCAnaW1nJyA9PiAkdGhpcy0+bmV4dFsnaWQnXSkpIC4kZW5kLiciJykuIlxuIjsK
CQkJZWxzZSAkaHRtbCA9IHRhZygkdGhpbmcsJ2EnLCcgaHJlZj0iJy4gJHRoaXMtPm1ha2VS
ZXF1ZXN0KGFycmF5KCdpbWcnID0+ICR0aGlzLT5uZXh0WydpZCddKSkgLiRlbmQuJyInKS4i
XG4iOwoJCX0KCQlyZXR1cm4gJGh0bWw7Cgl9CgoJZnVuY3Rpb24gaW1nX25leHRfdGh1bWJu
YWlsKCkgewoJCWlmICghaXNzZXQoJHRoaXMtPmNvbnRleHQpKSAkdGhpcy0+Z2V0Q29udGV4
dCgpOwoJCSR0aGlzLT5uZXh0WydpZCddID0gKGZsb2F0KSAoJHRoaXMtPm5leHRbJ2lkJ10p
OwoJCWlmICgkdGhpcy0+bmV4dFsnaWQnXSAhPSAwKSB7CgkJCSRyZXN1bHQgPSAnPGltZyBz
cmM9IicgLiAkdGhpcy0+bmV4dFsndGh1bWInXSAuICciIGFsdD0iJyAuICR0aXRsZSAuICci
IC8+JzsKCQl9CgkJcmV0dXJuICRyZXN1bHQ7Cgl9CgoJZnVuY3Rpb24gaW1nX3NldF90aXRs
ZSgpIHsKCQlpZiAoaXNzZXQoJHRoaXMtPnNldCkpIHsKCQkJJG1ldGhvZCA9ICdmbGlja3Iu
cGhvdG9zZXRzLmdldEluZm8nIC4gJHRoaXMtPnVzZXJkYXRhIC4gJyZwaG90b3NldF9pZD0n
IC4gJHRoaXMtPnNldDsKCQkJJHhtbCA9IG5ldyBGbGlja3IoJG1ldGhvZCk7CgkJCSR0aGlz
LT5zZXRfdGl0bGUgPSBhcnJheV9zaGlmdCgkeG1sLT54cGF0aCgnL3JzcC9waG90b3NldC90
aXRsZS90ZXh0KCknKSk7CgkJCXJldHVybiAkdGhpcy0+c2V0X3RpdGxlOwoJCX0KCQlyZXR1
cm4gJyc7Cgl9CgoJZnVuY3Rpb24gaW1nX3NldF9saW5rKCR0aGluZykgewoJCWlmIChpc3Nl
dCgkdGhpcy0+c2V0KSkgewoJCQlyZXR1cm4gdGFnKCR0aGluZywgJ2EnLCAnIGhyZWY9Iicu
ICR0aGlzLT5tYWtlUmVxdWVzdChhcnJheSgnc2V0JyA9PiAkdGhpcy0+c2V0KSkgLiciJyk7
CgkJfQoJCXJldHVybiAnJzsKCX0KCglmdW5jdGlvbiBpbWdfbmF2KCkgewoJCSRodG1sIC49
ICR0aGlzLT5pbWdfcHJldmlvdXMoKTsKCQkkaHRtbCAuPSAnPGgyIGNsYXNzPSJzZXRuYW1l
Ij4nIC4gJHRoaXMtPmltZ19zZXRfdGl0bGUoKSAuICc8L2gyPicgLiAiXG4iOwoJCSRodG1s
IC49ICR0aGlzLT5pbWdfbmV4dCgpOwoJCXJldHVybiAkaHRtbDsKCX0KCglmdW5jdGlvbiBp
bWdfdGl0bGUoKSB7CgkJcmV0dXJuICR0aGlzLT50aXRsZTsKCX0KCglmdW5jdGlvbiBpbWdf
ZGVzY3JpcHRpb24oKSB7CgkJJGRlc2NyaXB0aW9uX3N0cmluZyA9IChzdHJpbmcpICR0aGlz
LT5kZXNjcmlwdGlvbjsKCQlpZiAoJGRlc2NyaXB0aW9uX3N0cmluZyAhPSAnQXJyYXknKSBy
ZXR1cm4gJGRlc2NyaXB0aW9uX3N0cmluZzsKCX0KCglmdW5jdGlvbiBpbWdfaWZfZGVzY3Jp
cHRpb24gKCR0aGluZykgewoJCWlmICgkdGhpcy0+ZGVzY3JpcHRpb24gIT0gJyZuYnNwOycg
YW5kICFlbXB0eSgkdGhpcy0+ZGVzY3JpcHRpb24pKSAkcmVzdWx0ID0gcGFyc2UoJHRoaW5n
KTsKCQllbHNlICRyZXN1bHQgPSAnJzsKCQlyZXR1cm4gJHJlc3VsdDsKCX0KCglmdW5jdGlv
biBpbWdfdGFncygkc2VwYXJhdG9yKSB7CgkJJGh0bWwgPSB0YWcoJHRoaXMtPnJhd190YWdz
WzBdLCdhJywnIGhyZWY9IicgLiAkdGhpcy0+bWFrZVJlcXVlc3QoYXJyYXkoJ3RhZ3MnID0+
ICR0aGlzLT50YWdzWzBdKSkgLiAnIicpLiJcbiI7CgkJZm9yKCRpID0gMTsgJGkgPCBzaXpl
b2YoJHRoaXMtPnRhZ3MpOyAkaSsrKSB7CgkJCSRodG1sIC49ICRzZXBhcmF0b3I7CgkJCSRo
dG1sIC49IHRhZygkdGhpcy0+cmF3X3RhZ3NbJGldLCdhJywnIGhyZWY9IicgLiAkdGhpcy0+
bWFrZVJlcXVlc3QoYXJyYXkoJ3RhZ3MnID0+ICR0aGlzLT50YWdzWyRpXSkpIC4gJyInKS4i
XG4iOwoJCX0KCQlyZXR1cm4gJGh0bWw7Cgl9CgoJZnVuY3Rpb24gaW1nX251bWJlcl9vZl9j
b21tZW50cygpIHsKCQlyZXR1cm4gJHRoaXMtPmNvbW1lbnRzOwoJfQoKCWZ1bmN0aW9uIGlt
Z19jb21tZW50c19pbnZpdGUoJGludml0ZXRleHQpIHsKCQlyZXR1cm4gdGFnKCRpbnZpdGV0
ZXh0LCdhJywnIGhyZWY9IicgLiAnaHR0cDovL3d3dy5mbGlja3IuY29tL3Bob3Rvcy8nIC4g
dXJsZW5jb2RlKCR0aGlzLT5uc2lkKSAuICcvJyAuICR0aGlzLT5pZCAuICcvIicpOwoJfQoK
CWZ1bmN0aW9uIGltZ19kYXRlX3Bvc3RlZCgkcGFyYW1zKSB7CgkJaWYgKGlzc2V0KCRwYXJh
bXNbJ2Zvcm1hdCddKSkgcmV0dXJuIHNhZmVfc3RyZnRpbWUoJHBhcmFtc1snZm9ybWF0J10s
ICR0aGlzLT5kYXRlX3Bvc3RlZCk7CgkJZ2xvYmFsICRhcmNoaXZlX2RhdGVmb3JtYXQ7CgkJ
cmV0dXJuIHNhZmVfc3RyZnRpbWUoJGFyY2hpdmVfZGF0ZWZvcm1hdCwgJHRoaXMtPmRhdGVf
cG9zdGVkKTsKCX0KCglmdW5jdGlvbiBpbWdfZGF0ZV90YWtlbigkcGFyYW1zKSB7CgkJaWYg
KGlzc2V0KCRwYXJhbXNbJ2Zvcm1hdCddKSkgcmV0dXJuIHNhZmVfc3RyZnRpbWUoJHBhcmFt
c1snZm9ybWF0J10sIHN0cnRvdGltZSgkdGhpcy0+ZGF0ZV90YWtlbikpOwoJCWdsb2JhbCAk
YXJjaGl2ZV9kYXRlZm9ybWF0OwoJCXJldHVybiBzYWZlX3N0cmZ0aW1lKCRhcmNoaXZlX2Rh
dGVmb3JtYXQsIHN0cnRvdGltZSgkdGhpcy0+ZGF0ZV90YWtlbikpOwoJfQoKCWZ1bmN0aW9u
IF9fdG9TdHJpbmcoKSB7CgkJaWYoISR0aGlzLT54bWwtPmlzVmFsaWQoKSkgewoJCQlyZXR1
cm4gJEdMT0JBTFNbJ3RleHQnXVsnZXJyb3JfbWVzc2FnZSddOwoJCX0KCQkkcmVzdWx0ID0g
cGFyc2UoJHRoaXMtPmZvcm0pOwoJCXJldHVybiAkcmVzdWx0OwoJfQp9CgoKY2xhc3MgVGFn
bGlzdCBleHRlbmRzIFZkaF9GbGlja3IgewoJdmFyICR4bWwsICR0YWdsaXN0LCAkY291bnQs
ICRzb3VyY2VfdGFnOwoKCWZ1bmN0aW9uIFRhZ2xpc3QoJHBhcmFtcykgewoJCSR0aGlzLT5W
ZGhfRmxpY2tyKCRwYXJhbXMpOwoJfQoKCWZ1bmN0aW9uIGxpc3RfYWxsKCRwYXJhbXMpIHsK
CQkkbWV0aG9kID0gJ2ZsaWNrci50YWdzLmdldExpc3RVc2VyJyAuICR0aGlzLT51c2VyZGF0
YTsKCQlyZXR1cm4gJHRoaXMtPmdlbmVyYXRlTGlzdCgkbWV0aG9kLCAkcGFyYW1zKTsKCX0K
CglmdW5jdGlvbiBsaXN0X3BvcHVsYXIoJHBhcmFtcykgewoJCWlzc2V0KCRwYXJhbXNbJ2Nv
dW50J10pPyAkdGhpcy0+Y291bnQgPSAkcGFyYW1zWydjb3VudCddIDogJHRoaXMtPmNvdW50
ID0gMTA7CgkJJG1ldGhvZCA9ICdmbGlja3IudGFncy5nZXRMaXN0VXNlclBvcHVsYXInIC4g
JHRoaXMtPnVzZXJkYXRhIC4gJyZjb3VudD0nIC4gJHRoaXMtPmNvdW50OwoJCXJldHVybiAk
dGhpcy0+Z2VuZXJhdGVMaXN0KCRtZXRob2QsICRwYXJhbXMpOwoJfQoKCWZ1bmN0aW9uIGxp
c3RfcmVsYXRlZCgkcGFyYW1zKSB7CgkJaXNzZXQoJHBhcmFtc1snc291cmNlX3RhZyddKT8g
JHRoaXMtPnNvdXJjZV90YWcgPSAkcGFyYW1zWydzb3VyY2VfdGFnJ10gOiAkdGhpcy0+c291
cmNlX3RhZyA9ICcnOwoJCSRtZXRob2QgPSAnZmxpY2tyLnRhZ3MuZ2V0UmVsYXRlZCcgLiAk
dGhpcy0+dXNlcmRhdGEgLiAnJnRhZz0nIC4gJHRoaXMtPnNvdXJjZV90YWc7CgkJcmV0dXJu
ICR0aGlzLT5nZW5lcmF0ZUxpc3QoJG1ldGhvZCwgJHBhcmFtcyk7Cgl9CgoJZnVuY3Rpb24g
Z2VuZXJhdGVMaXN0ICgkbWV0aG9kLCAkcGFyYW1zKSB7CgkJJHRoaXMtPnhtbCA9IG5ldyBG
bGlja3IoJG1ldGhvZCk7CgkJaWYoJHRoaXMtPnhtbC0+aXNWYWxpZCgpKSB7CgkJCSR0aGlz
LT50YWdsaXN0ID0gJHRoaXMtPnhtbC0+eHBhdGgoJy8vdGFncy90YWcvdGV4dCgpJyk7CgkJ
fQoJCWZvciAoJGkgPSAwOyAkaSA8PSBzaXplb2YoJHRoaXMtPnRhZ2xpc3QpIC0gMTsgJGkr
KykgewoJCQkkdGhpcy0+dGFnbGlzdFskaV0gPSB0YWcoJHRoaXMtPnRhZ2xpc3RbJGldLCdh
JywnIGhyZWY9IicgLiAkdGhpcy0+bWFrZVJlcXVlc3QoYXJyYXkoJ3RhZ3MnID0+ICR0aGlz
LT50YWdsaXN0WyRpXSkpIC4gJyInKTsKCQl9CgkJcmV0dXJuIGRvV3JhcCgkdGhpcy0+dGFn
bGlzdCwgJHBhcmFtc1snd3JhcHRhZyddLCAkcGFyYW1zWydicmVhayddLCAkcGFyYW1zWydj
bGFzcyddLCAkcGFyYW1zWydicmVha2NsYXNzJ10sICRwYXJhbXNbJ2F0dHMnXSk7Cgl9CgoJ
ZnVuY3Rpb24gX190b1N0cmluZygpIHsKCQlyZXR1cm4gJHRoaXMtPmxpc3RfYWxsOwoJfQp9
CgoKY2xhc3MgRmxpY2tyIHsKCXZhciAkeG1sdXJsID0gJ2h0dHA6Ly93d3cuZmxpY2tyLmNv
bS9zZXJ2aWNlcy9yZXN0Lz9tZXRob2Q9JzsKCXZhciAkeG1sOwoKCWZ1bmN0aW9uIEZsaWNr
cigkbWV0aG9kKSB7CgkJLy8kdGltZV9zdGFydCA9IG1pY3JvdGltZSh0cnVlKTsKCQkkdGhp
cy0+eG1sdXJsIC49ICRtZXRob2Q7CgkJaWYoaXNzZXQoJEdMT0JBTFNbJ3VzZV9waHA0J10p
KSB7CgkJCWlmIChmdW5jdGlvbl9leGlzdHMoJ2N1cmxfaW5pdCcpKSB7CgkJCQkkY2ggPSBA
Y3VybF9pbml0KCk7CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCAkdGhpcy0+
eG1sdXJsKTsKCQkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IRUFERVIsIDApOwoJCQkJ
Y3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCAxKTsKCQkJCSRyZXNw
ID0gY3VybF9leGVjKCRjaCk7CgkJCQljdXJsX2Nsb3NlKCRjaCk7CgkJCQlpZigkZG9tID0g
QGRvbXhtbF9vcGVuX21lbSgkcmVzcCkpIHsKCQkJCQkkdGhpcy0+eG1sID0geHBhdGhfbmV3
X2NvbnRleHQoJGRvbSk7CgkJCQl9CgkJCX0KCQkJZWxzZSBpZiAoJHJlc3AgPSBAZmlsZV9n
ZXRfY29udGVudHMoJHRoaXMtPnhtbHVybCkpIHsKCQkJCWlmKCRkb20gPSBAZG9teG1sX29w
ZW5fbWVtKCRyZXNwKSkgewoJCQkJCSR0aGlzLT54bWwgPSB4cGF0aF9uZXdfY29udGV4dCgk
ZG9tKTsKCQkJCX0KCQkJfQoJCQllbHNlIGlmIChmdW5jdGlvbl9leGlzdHMoJ2RvbXhtbF9v
cGVuX2ZpbGUnKSl7CgkJCQkkZG9tID0gQGRvbXhtbF9vcGVuX2ZpbGUoJHRoaXMtPnhtbHVy
bCk7CgkJCQkkdGhpcy0+eG1sID0geHBhdGhfbmV3X2NvbnRleHQoJGRvbSk7CgkJCX0KCQl9
CgkJZWxzZSB7CgkJCWlmKCEkdGhpcy0+eG1sID0gQHNpbXBsZXhtbF9sb2FkX2ZpbGUoJHRo
aXMtPnhtbHVybCkpIHsKCQkJCXVuc2V0KCR0aGlzLT54bWwpOwoJCQl9CgkJfQoJCS8vZWNo
byBuLGNvbW1lbnQoKCdydW50aW1lIGZvciAnIC4gJG1ldGhvZC4gJzogJyAuIChtaWNyb3Rp
bWUodHJ1ZSkgLSAkdGltZV9zdGFydCkgLiAiPGJyIC8+XG4iKSk7Cgl9CgoJZnVuY3Rpb24g
aXNWYWxpZCgpIHsKCQlpZihpc3NldCgkdGhpcy0+eG1sKSkgewoJCQkkcmVzID0gYXJyYXlf
c2hpZnQoJHRoaXMtPnhwYXRoKCcvcnNwL0BzdGF0JykpOwoJCQlpZiAoJHJlcyA9PSAnZmFp
bCcpIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJZWxz
ZSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJZnVuY3Rpb24geHBhdGgoJHBhdGgpIHsK
CQlpZighaXNzZXQoJHRoaXMtPnhtbCkpIHsKCQkJcmV0dXJuIE5VTEw7CgkJfQoJCWlmKGlz
c2V0KCRHTE9CQUxTWyd1c2VfcGhwNCddKSkgewoJCQkkcmVzdWx0ID0geHBhdGhfZXZhbF9l
eHByZXNzaW9uKCR0aGlzLT54bWwsICRwYXRoKTsKCQkJJHJlc3VsdCA9ICRyZXN1bHQtPm5v
ZGVzZXQ7CgkJCS8vIENvbnZlcnQgdG8gU3RyaW5nOgoJCQlmb3IoJGl0ZXJhdG9yID0gMDsg
JGl0ZXJhdG9yIDwgY291bnQoJHJlc3VsdCk7ICRpdGVyYXRvcisrKSB7CgkJCQkkcmVzdWx0
WyRpdGVyYXRvcl0gPSAkcmVzdWx0WyRpdGVyYXRvcl0tPmdldF9jb250ZW50KCk7CgkJCX0K
CQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCWVsc2UgewoJCQkkcmVzdWx0ID0gJHRoaXMtPnht
bC0+eHBhdGgoJHBhdGgpOwoJCQkvLyBDb252ZXJ0IHRvIFN0cmluZzoKCQkJZm9yKCRpdGVy
YXRvciA9IDA7ICRpdGVyYXRvciA8IGNvdW50KCRyZXN1bHQpOyAkaXRlcmF0b3IrKykgewoJ
CQkJJHJlc3VsdFskaXRlcmF0b3JdID0gKHN0cmluZykgJHJlc3VsdFskaXRlcmF0b3JdOwoJ
CQl9CgkJCXJldHVybiAkcmVzdWx0OwoJCX0KCX0KfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcigk
cGFyYW1zKSB7CglpZihpc3NldCgkX0dFVFsnaW1nJ10pKSB7CgkJcmV0dXJuIHZkaF9mbGlj
a3JfaW1nKCRwYXJhbXMpOwoJfQoJaWYoaXNzZXQoJF9HRVRbJ3RhZ3MnXSkpIHsKCQlyZXR1
cm4gdmRoX2ZsaWNrcl90aHVtYm5haWxzKCRwYXJhbXMpOwoJfQoJaWYoaXNzZXQoJF9HRVRb
J3NldCddKSkgewoJCXJldHVybiB2ZGhfZmxpY2tyX3RodW1ibmFpbHMoJHBhcmFtcyk7Cgl9
CglnbG9iYWwgJGdhbDsKCS8vKChpc3NldCAoJGdhbCkpPT1mYWxzZSk/ICRnYWwgPSBuZXcg
R2FsbGVyeSgkcGFyYW1zKSA6ICcnOwoJaWYgKCFlbXB0eSgkcGFyYW1zKSkgJGdhbCA9IG5l
dyBHYWxsZXJ5KCRwYXJhbXMpOwoJcmV0dXJuICRnYWwtPl9fdG9TdHJpbmcoKTsKfQoKZnVu
Y3Rpb24gdmRoX2ZsaWNrcl90aHVtYm5haWxzKCRwYXJhbXMpIHsKCWlmKGlzc2V0KCRfR0VU
WydpbWcnXSkpIHsKCQlyZXR1cm4gdmRoX2ZsaWNrcl9pbWcoJHBhcmFtcyk7Cgl9CglnbG9i
YWwgJHRodW1iczsKCS8vKChpc3NldCAoJHRodW1icykpPT1mYWxzZSk/ICR0aHVtYnMgPSBu
ZXcgVGh1bWJuYWlscygkcGFyYW1zKSA6ICcnOwoJaWYgKCFlbXB0eSgkcGFyYW1zKSkgJHRo
dW1icyA9IG5ldyBUaHVtYm5haWxzKCRwYXJhbXMpOwoJcmV0dXJuICR0aHVtYnMtPl9fdG9T
dHJpbmcoKTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl9pbWcoJHBhcmFtcykgewoJZ2xvYmFs
ICRzaW5nbGVpbWc7CgkvLygoaXNzZXQgKCRzaW5nbGVpbWcpKT09ZmFsc2UpPyAkc2luZ2xl
aW1nID0gbmV3IFBpY3R1cmUoJHBhcmFtcykgOiAnJzsKCWlmICghZW1wdHkoJHBhcmFtcykp
ICRzaW5nbGVpbWcgPSBuZXcgUGljdHVyZSgkcGFyYW1zKTsKCXJldHVybiAkc2luZ2xlaW1n
LT5fX3RvU3RyaW5nKCk7Cn0KCi8vbmV1ZSB0eHAgdGFncwoKZ2xvYmFsICR2ZGhfZmxpY2ty
OwoKZnVuY3Rpb24gdmRoX2ZsaWNrcl9zZXRfaW1nICgkcGFyYW1zKSB7CglnbG9iYWwgJGdh
bDsKCXJldHVybiAkZ2FsLT5zZXRfaW1nKCRwYXJhbXMpOwp9CgpmdW5jdGlvbiB2ZGhfZmxp
Y2tyX3NldF90aXRsZSAoJHBhcmFtcykgewoJZ2xvYmFsICRnYWw7CglyZXR1cm4gJGdhbC0+
c2V0X3RpdGxlKCRwYXJhbXMpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX3NldF9kZXNjcmlw
dGlvbiAoKSB7CglnbG9iYWwgJGdhbDsKCXJldHVybiAkZ2FsLT5zZXRfZGVzY3JpcHRpb24o
KTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl9zZXRfbnVtYmVyX29mX3Bob3RvcyAoKSB7Cgln
bG9iYWwgJGdhbDsKCXJldHVybiAkZ2FsLT5zZXRfbnVtYmVyX29mX3Bob3RvcygpOwp9Cgpm
dW5jdGlvbiB2ZGhfZmxpY2tyX3NldF9saW5rICgkcGFyYW1zLCAkdGhpbmcpIHsKCSRyZXN1
bHQgPSBwYXJzZSgkdGhpbmcpOwoJZ2xvYmFsICRnYWw7CglyZXR1cm4gJGdhbC0+c2V0X2xp
bmsoJHBhcmFtcywgJHJlc3VsdCk7Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3Jfc2V0X2xpc3Qg
KCRwYXJhbXMpIHsKCWdsb2JhbCAkZ2FsOwoJKChpc3NldCAoJGdhbCkpPT1mYWxzZSk/ICRn
YWwgPSBuZXcgR2FsbGVyeSgkcGFyYW1zKSA6ICcnOwoJcmV0dXJuICRnYWwtPnNldF9saXN0
KCRwYXJhbXMpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX3RhZ19saXN0X2FsbCAoJHBhcmFt
cykgewoJJHRhZ2xhbGFsYSA9IG5ldyBUYWdsaXN0KCRwYXJhbXMpOwoJcmV0dXJuICR0YWds
YWxhbGEtPmxpc3RfYWxsKCRwYXJhbXMpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX3RhZ19s
aXN0X3BvcHVsYXIgKCRwYXJhbXMpIHsKCSR0YWdsYWxhbGEgPSBuZXcgVGFnbGlzdCgkcGFy
YW1zKTsKCXJldHVybiAkdGFnbGFsYWxhLT5saXN0X3BvcHVsYXIoJHBhcmFtcyk7Cn0KCmZ1
bmN0aW9uIHZkaF9mbGlja3JfdGFnX2xpc3RfcmVsYXRlZCAoJHBhcmFtcykgewoJJHRhZ2xh
bGFsYSA9IG5ldyBUYWdsaXN0KCRwYXJhbXMpOwoJcmV0dXJuICR0YWdsYWxhbGEtPmxpc3Rf
cmVsYXRlZCgkcGFyYW1zKTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl90aHVtYm5haWxzX3Rp
dGxlICgpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0dXJuICR0aHVtYnMtPnRodW1ibmFpbHNf
dGl0bGUoKTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl90aHVtYm5haWxzX2Rlc2NyaXB0aW9u
ICgpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0dXJuICR0aHVtYnMtPnRodW1ibmFpbHNfZGVz
Y3JpcHRpb24oKTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl90aHVtYm5haWxzX2lmX2Rlc2Ny
aXB0aW9uICgkcGFyYW1zLCAkdGhpbmcpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0dXJuICR0
aHVtYnMtPnRodW1ibmFpbHNfaWZfZGVzY3JpcHRpb24oJHRoaW5nKTsKfQoKZnVuY3Rpb24g
dmRoX2ZsaWNrcl90aHVtYm5haWxzX3NsaWRlc2hvdyAoJHBhcmFtcywgJHRoaW5nKSB7Cgkk
cmVzdWx0ID0gcGFyc2UoJHRoaW5nKTsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0dXJuICR0aHVt
YnMtPnRodW1ibmFpbHNfc2xpZGVzaG93KCRyZXN1bHQpOwp9CgpmdW5jdGlvbiB2ZGhfZmxp
Y2tyX3RodW1ibmFpbHNfaW1nICgpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0dXJuICR0aHVt
YnMtPnRodW1ibmFpbHNfaW1nKCk7Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3JfdGh1bWJuYWls
c19pbWdfdGl0bGUgKCkgewoJZ2xvYmFsICR0aHVtYnM7CglyZXR1cm4gJHRodW1icy0+dGh1
bWJuYWlsc19pbWdfdGl0bGUoKTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl90aHVtYm5haWxz
X2xpbmsgKCRwYXJhbXMsICR0aGluZykgewoJJHJlc3VsdCA9IHBhcnNlKCR0aGluZyk7Cgln
bG9iYWwgJHRodW1iczsKCXJldHVybiAkdGh1bWJzLT50aHVtYm5haWxzX2xpbmsoJHJlc3Vs
dCk7Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3JfdGh1bWJuYWlsc19saXN0ICgkcGFyYW1zKSB7
CglnbG9iYWwgJHRodW1iczsKCWlmIChpc3NldCgkX0dFVFsnc2V0J10pIG9yIGlzc2V0KCRf
R0VUWyd0YWdzJ10pIG9yIGlzc2V0KCRwYXJhbXNbJ3NldCddKSBvciBpc3NldCgkcGFyYW1z
Wyd0YWdzJ10pIG9yIGlzc2V0KCRwYXJhbXNbJ2xhdGVzdCddKSkgewoJCWlmICgoaXNzZXQg
KCR0aHVtYnMpKT09ZmFsc2UpICR0aHVtYnMgPSBuZXcgVGh1bWJuYWlscygkcGFyYW1zKTsK
CX0KCWlmIChpc3NldCgkX0dFVFsnc2V0J10pIG9yIGlzc2V0KCRfR0VUWyd0YWdzJ10pIG9y
IGlzc2V0KCR0aHVtYnMtPnNldCkgb3IgaXNzZXQoJHRodW1icy0+dGFncykgb3IgaXNzZXQo
JHRodW1icy0+bGF0ZXN0KSkgewoJCXJldHVybiAkdGh1bWJzLT50aHVtYm5haWxzX2xpc3Qo
JHBhcmFtcyk7Cgl9CglyZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3JfdGh1
bWJuYWlsc19udW1iZXJfb2ZfcGhvdG9zKCkgewoJZ2xvYmFsICR0aHVtYnM7CglyZXR1cm4g
JHRodW1icy0+dGh1bWJuYWlsc19udW1iZXJfb2ZfcGhvdG9zKCk7Cn0KCmZ1bmN0aW9uIHZk
aF9mbGlja3JfdGh1bWJuYWlsc19wZXJfcGFnZSgpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0
dXJuICR0aHVtYnMtPnRodW1ibmFpbHNfcGVyX3BhZ2UoKTsKfQoKZnVuY3Rpb24gdmRoX2Zs
aWNrcl90aHVtYm5haWxzX2N1cnJlbnRfcGFnZSgpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0
dXJuICR0aHVtYnMtPnRodW1ibmFpbHNfY3VycmVudF9wYWdlKCk7Cn0KCmZ1bmN0aW9uIHZk
aF9mbGlja3JfdGh1bWJuYWlsc190b3RhbF9wYWdlcygpIHsKCWdsb2JhbCAkdGh1bWJzOwoJ
cmV0dXJuICR0aHVtYnMtPnRodW1ibmFpbHNfdG90YWxfcGFnZXMoKTsKfQoKZnVuY3Rpb24g
dmRoX2ZsaWNrcl90aHVtYm5haWxzX3BhZ2VzX2ZpcnN0KCRwYXJhbXMsICR0aGluZykgewoJ
Z2xvYmFsICR0aHVtYnM7CglyZXR1cm4gJHRodW1icy0+dGh1bWJuYWlsc19wYWdlc19maXJz
dCgkdGhpbmcpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX3RodW1ibmFpbHNfcGFnZXNfbGFz
dCgkcGFyYW1zLCAkdGhpbmcpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0dXJuICR0aHVtYnMt
PnRodW1ibmFpbHNfcGFnZXNfbGFzdCgkdGhpbmcpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2ty
X3RodW1ibmFpbHNfcGFnZXNfcHJldmlvdXMoJHBhcmFtcywgJHRoaW5nKSB7CglnbG9iYWwg
JHRodW1iczsKCXJldHVybiAkdGh1bWJzLT50aHVtYm5haWxzX3BhZ2VzX3ByZXZpb3VzKCR0
aGluZyk7Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3JfdGh1bWJuYWlsc19wYWdlc19uZXh0KCRw
YXJhbXMsICR0aGluZykgewoJZ2xvYmFsICR0aHVtYnM7CglyZXR1cm4gJHRodW1icy0+dGh1
bWJuYWlsc19wYWdlc19uZXh0KCR0aGluZyk7Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3JfdGh1
bWJuYWlsc19wYWdlc19saXN0KCRwYXJhbXMpIHsKCWdsb2JhbCAkdGh1bWJzOwoJcmV0dXJu
ICR0aHVtYnMtPnRodW1ibmFpbHNfcGFnZXNfbGlzdCgkcGFyYW1zKTsKfQoKZnVuY3Rpb24g
dmRoX2ZsaWNrcl90aHVtYm5haWxzX3BhZ2VzX3N0YXJ0dGh1bWIoKSB7CglnbG9iYWwgJHRo
dW1iczsKCXJldHVybiAkdGh1bWJzLT50aHVtYm5haWxzX3BhZ2VzX3N0YXJ0dGh1bWIoKTsK
fQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl90aHVtYm5haWxzX3BhZ2VzX2VuZHRodW1iKCkgewoJ
Z2xvYmFsICR0aHVtYnM7CglyZXR1cm4gJHRodW1icy0+dGh1bWJuYWlsc19wYWdlc19lbmR0
aHVtYigpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX3RodW1ibmFpbHNfaWZfbXVsdGlwbGVf
cGFnZXMoJHBhcmFtcywgJHRoaW5nKSB7CglnbG9iYWwgJHRodW1iczsKCXJldHVybiAkdGh1
bWJzLT50aHVtYm5haWxzX2lmX211bHRpcGxlX3BhZ2VzKCR0aGluZyk7Cn0KCmZ1bmN0aW9u
IHZkaF9mbGlja3JfaW1nX3RpdGxlICgpIHsKCWdsb2JhbCAkc2luZ2xlaW1nOwoJcmV0dXJu
ICRzaW5nbGVpbWctPmltZ190aXRsZSgpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19k
ZXNjcmlwdGlvbiAoKSB7CglnbG9iYWwgJHNpbmdsZWltZzsKCXJldHVybiAkc2luZ2xlaW1n
LT5pbWdfZGVzY3JpcHRpb24oKTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl9pbWdfaWZfZGVz
Y3JpcHRpb24gKCRwYXJhbXMsICR0aGluZykgewoJZ2xvYmFsICRzaW5nbGVpbWc7CglyZXR1
cm4gJHNpbmdsZWltZy0+aW1nX2lmX2Rlc2NyaXB0aW9uKCR0aGluZyk7Cn0KCmZ1bmN0aW9u
IHZkaF9mbGlja3JfaW1nX25ha2VkICgpIHsKCWdsb2JhbCAkc2luZ2xlaW1nOwoJcmV0dXJu
ICRzaW5nbGVpbWctPmltZ19uYWtlZCgpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19s
aW5rICgkcGFyYW1zLCAkdGhpbmcpIHsKCSRyZXN1bHQgPSBwYXJzZSgkdGhpbmcpOwoJZ2xv
YmFsICRzaW5nbGVpbWc7CglyZXR1cm4gJHNpbmdsZWltZy0+aW1nX2xpbmsoJHJlc3VsdCk7
Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3JfaW1nX3ByZXZpb3VzICgkcGFyYW1zLCAkdGhpbmcp
IHsKCSRyZXN1bHQgPSBwYXJzZSgkdGhpbmcpOwoJZ2xvYmFsICRzaW5nbGVpbWc7CglyZXR1
cm4gJHNpbmdsZWltZy0+aW1nX3ByZXZpb3VzKCRwYXJhbXNbJ2xhYmVsJ10sICRyZXN1bHQp
Owp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19wcmV2aW91c190aHVtYm5haWwgKCkgewoJ
Z2xvYmFsICRzaW5nbGVpbWc7CglyZXR1cm4gJHNpbmdsZWltZy0+aW1nX3ByZXZpb3VzX3Ro
dW1ibmFpbCgpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19uZXh0ICgkcGFyYW1zLCAk
dGhpbmcpIHsKCSRyZXN1bHQgPSBwYXJzZSgkdGhpbmcpOwoJZ2xvYmFsICRzaW5nbGVpbWc7
CglyZXR1cm4gJHNpbmdsZWltZy0+aW1nX25leHQoJHBhcmFtc1snbGFiZWwnXSwgJHJlc3Vs
dCk7Cn0KCmZ1bmN0aW9uIHZkaF9mbGlja3JfaW1nX25leHRfdGh1bWJuYWlsICgpIHsKCWds
b2JhbCAkc2luZ2xlaW1nOwoJcmV0dXJuICRzaW5nbGVpbWctPmltZ19uZXh0X3RodW1ibmFp
bCgpOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19zZXRfdGl0bGUgKCkgewoJZ2xvYmFs
ICRzaW5nbGVpbWc7CglyZXR1cm4gJHNpbmdsZWltZy0+aW1nX3NldF90aXRsZSgpOwp9Cgpm
dW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19zZXRfbGluayAoJHBhcmFtcywgJHRoaW5nKSB7Cgkk
cmVzdWx0ID0gcGFyc2UoJHRoaW5nKTsKCWdsb2JhbCAkc2luZ2xlaW1nOwoJcmV0dXJuICRz
aW5nbGVpbWctPmltZ19zZXRfbGluaygkcmVzdWx0KTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNr
cl9pbWdfdGFncyAoJHBhcmFtcykgewoJZ2xvYmFsICRzaW5nbGVpbWc7CglyZXR1cm4gJHNp
bmdsZWltZy0+aW1nX3RhZ3MoJHBhcmFtc1snc2VwYXJhdG9yJ10pOwp9CgpmdW5jdGlvbiB2
ZGhfZmxpY2tyX2ltZ19udW1iZXJfb2ZfY29tbWVudHMgKCkgewoJZ2xvYmFsICRzaW5nbGVp
bWc7CglyZXR1cm4gJHNpbmdsZWltZy0+aW1nX251bWJlcl9vZl9jb21tZW50cygpOwp9Cgpm
dW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19jb21tZW50c19pbnZpdGUgKCRwYXJhbXMsICR0aGlu
ZykgewoJJHJlc3VsdCA9IHBhcnNlKCR0aGluZyk7CglnbG9iYWwgJHNpbmdsZWltZzsKCXJl
dHVybiAkc2luZ2xlaW1nLT5pbWdfY29tbWVudHNfaW52aXRlKCRyZXN1bHQpOwp9CgpmdW5j
dGlvbiB2ZGhfZmxpY2tyX2ltZ19kYXRlX3Bvc3RlZCAoJHBhcmFtcykgewoJZ2xvYmFsICRz
aW5nbGVpbWc7CglyZXR1cm4gJHNpbmdsZWltZy0+aW1nX2RhdGVfcG9zdGVkKCRwYXJhbXMp
Owp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2ltZ19kYXRlX3Rha2VuICgkcGFyYW1zKSB7Cgln
bG9iYWwgJHNpbmdsZWltZzsKCXJldHVybiAkc2luZ2xlaW1nLT5pbWdfZGF0ZV90YWtlbigk
cGFyYW1zKTsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl9lbnYoJHBhcmFtcykgewoJZ2xvYmFs
ICR2ZGhfZmxpY2tyOwoJaWYoaXNzZXQoJF9HRVRbJ2ltZyddKSkgewoJCWdsb2JhbCAkc2lu
Z2xlaW1nOwoJCSR2ZGhfZmxpY2tyWydpc19pbWcnXSA9IDE7CgkJJHNpbmdsZWltZyA9IG5l
dyBQaWN0dXJlKCRwYXJhbXMpOwoJCXJldHVybiAnJzsKCX0KCWlmKGlzc2V0KCRfR0VUWyd0
YWdzJ10pKSB7CgkJZ2xvYmFsICR0aHVtYnM7CgkJJHZkaF9mbGlja3JbJ2lzX3RodW1ibmFp
bHMnXSA9IDE7CgkJJHZkaF9mbGlja3JbJ2lzX3RhZ3MnXSA9IDE7CgkJJHRodW1icyA9IG5l
dyBUaHVtYm5haWxzKCRwYXJhbXMpOwoJCXJldHVybiAnJzsKCX0KCWlmKGlzc2V0KCRfR0VU
WydzZXQnXSkpIHsKCQlnbG9iYWwgJHRodW1iczsKCQkkdmRoX2ZsaWNrclsnaXNfdGh1bWJu
YWlscyddID0gMTsKCQkkdmRoX2ZsaWNrclsnaXNfc2V0J10gPSAxOwoJCSR0aHVtYnMgPSBu
ZXcgVGh1bWJuYWlscygkcGFyYW1zKTsKCQlyZXR1cm4gJyc7Cgl9CglnbG9iYWwgJGdhbDsK
CSgoaXNzZXQgKCRnYWwpKT09ZmFsc2UpPyAkZ2FsID0gbmV3IEdhbGxlcnkoJHBhcmFtcykg
OiAnJzsKCSR2ZGhfZmxpY2tyWydpc19wcmV2aWV3J10gPSAxOwoJcmV0dXJuICcnOwp9Cgpm
dW5jdGlvbiB2ZGhfZmxpY2tyX2lmX3ByZXZpZXcoJHBhcmFtcywgJHRoaW5nKSB7CglnbG9i
YWwgJHZkaF9mbGlja3I7CglyZXR1cm4gKEAkdmRoX2ZsaWNrclsnaXNfcHJldmlldyddID09
IHRydWUpID8gcGFyc2UoJHRoaW5nKSA6ICcnOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2lm
X3RodW1ibmFpbHMoJHBhcmFtcywgJHRoaW5nKSB7CglnbG9iYWwgJHZkaF9mbGlja3I7Cgly
ZXR1cm4gKEAkdmRoX2ZsaWNrclsnaXNfdGh1bWJuYWlscyddID09IHRydWUpID8gcGFyc2Uo
JHRoaW5nKSA6ICcnOwp9CgpmdW5jdGlvbiB2ZGhfZmxpY2tyX2lmX3NldCgkcGFyYW1zLCAk
dGhpbmcpIHsKCWdsb2JhbCAkdmRoX2ZsaWNrcjsKCXJldHVybiAoQCR2ZGhfZmxpY2tyWydp
c19zZXQnXSA9PSB0cnVlKSA/IHBhcnNlKCR0aGluZykgOiAnJzsKfQoKZnVuY3Rpb24gdmRo
X2ZsaWNrcl9pZl90YWdzKCRwYXJhbXMsICR0aGluZykgewoJZ2xvYmFsICR2ZGhfZmxpY2ty
OwoJcmV0dXJuIChAJHZkaF9mbGlja3JbJ2lzX3RhZ3MnXSA9PSB0cnVlKSA/IHBhcnNlKCR0
aGluZykgOiAnJzsKfQoKZnVuY3Rpb24gdmRoX2ZsaWNrcl9pZl9pbWcoJHBhcmFtcywgJHRo
aW5nKSB7CglnbG9iYWwgJHZkaF9mbGlja3I7CglyZXR1cm4gKEAkdmRoX2ZsaWNrclsnaXNf
aW1nJ10gPT0gdHJ1ZSkgPyBwYXJzZSgkdGhpbmcpIDogJyc7Cn0KCmZ1bmN0aW9uIHZkaF9m
bGlja3Jfc2hvd19uc2lkKCRwYXJhbXMpIHsKCSRuc2lkY2hlY2sgPSBuZXcgVmRoX2ZsaWNr
cigkcGFyYW1zKTsKCXJldHVybiAkbnNpZGNoZWNrLT5fX3RvU3RyaW5nKCk7Cn0iO3M6Mzoi
bWQ1IjtzOjMyOiI1YzA3ZGQ5N2Q4MWE5MGM5Y2RlMzhmMmIwMzJkNWI3NiI7fQ==
